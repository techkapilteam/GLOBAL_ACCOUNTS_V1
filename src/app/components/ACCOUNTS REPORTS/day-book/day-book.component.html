<div class="container mt-3">
  <div class="screen-card">
    <div class="screen-header">
      <h2>Day Book</h2>
    </div>

    <div class="screen-content">
      <form [formGroup]="Daybook">

        <div class="row">
          <div class="col-xl-2 col-md-2 mt-4">
            <div class="form-check form-check-inline check-btn-secondary">
              <input
                class="form-check-input"
                id="asdate"
                type="checkbox"
                formControlName="date"
                (change)="checkox($event)">
              <label for="asdate"> Date :</label>
            </div>
          </div>

          <div class="col-xl-2 col-md-2 form-group">
            <label>{{ isSingleDate ? 'Date' : 'From Date' }}</label>
            <input type="date" class="form-control" formControlName="dfromdate">
          </div>

          <div class="col-xl-2 col-md-2 form-group" [hidden]="isSingleDate">
            <label>To Date</label>
            <input type="date" class="form-control" formControlName="dtodate">
          </div>

          <div class="col-xl-3 col-md-3 form-group mt-2 pt-3">
            <button type="button" class="btn btn-primary px-3 border-0" (click)="getdaybookdata()">
              Generate Report
            </button>
          </div>

          <div class="col-xl-3 col-md-3 form-group mt-2 pt-3">
            <button type="button" class="btn btn-primary px-3 border-0" (click)="GetChequeonHandDetails()">
              Cheques On Hand
            </button>
          </div>
        </div>

        <div class="row mt-2">
          <div class="col-xl-2 col-md-2 mt-4">
            <div class="form-check form-check-inline check-btn-secondary">
              <input
                class="form-check-input"
                id="kgms"
                type="checkbox"
                #kgmsChk
                (change)="checkboxx($event)">
              <label for="kgms"> Kgms :</label>
            </div>
          </div>

          <div class="col-xl-4 col-md-4" [hidden]="!kgmsChk.checked">
            <label>Branch</label>
            <div class="custom-select-wrapper">
              <select class="form-control custom-select" formControlName="branch">
                <option value="">Select</option>
                <option value="KGMS1">KGMS Branch 1</option>
                <option value="KGMS2">KGMS Branch 2</option>
                <option value="KGMS3">KGMS Branch 3</option>
              </select>
            </div>
          </div>

          <div class="col-xl-3 col-md-3 form-group mt-2 pt-3">
            <button type="button" class="btn btn-primary px-3 border-0" (click)="getsummaryReport()">
              Generate Report
            </button>
          </div>
        </div>

      </form>

      <form *ngIf="showGrid" class="mt-4 p-3 border" style="background-color:white;">
        <div class="d-flex justify-content-end gap-2 mb-2">
          <button type="button" (click)="exportPDF()" class="btn btn-link p-0">
            <img src="assets/images/pdf-icon-blue.svg" width="18" alt="PDF">
          </button>
          <button type="button" (click)="printReport()" class="btn btn-link p-0">
            <img src="assets/images/print-icon-blue.svg" width="18" alt="Print">
          </button>
        </div>

        <div class="text-center mb-3">
          <h4>KAPIL CHITS(HYDERABAD) PVT. LTD.</h4>
          <p class="mb-1">
            Above TVS Showroom, 1st Floor, Opp:R&B Guest House,
            Old NK-07, Kamareddy
          </p>
          <p class="mb-1">CIN : U65992TG2008PTC060803</p>
          
          <p class="text-end">
            <b>Branch : {{ Daybook.value.branch || 'Main Branch' }}</b>
          </p>
          <h5>Day Book</h5>
          <p class="text-start">
            <b>Date :</b> {{ Daybook.value.dfromdate | date:'dd-MMM-yyyy' }}
          </p>
        </div>

        <ngx-datatable
          class="bootstrap"
          [rows]="transactions"
          [headerHeight]="40"
          [rowHeight]="40"
          [columnMode]="'force'">
          <ngx-datatable-column name="Transaction No"  sortable="false" prop="rTxn"></ngx-datatable-column>
          <ngx-datatable-column name="Particulars" sortable="false" prop="rPart"></ngx-datatable-column>
          <ngx-datatable-column name="Type" sortable="false" prop="rType"></ngx-datatable-column>
          <ngx-datatable-column name="Amount" sortable="false">
            <ng-template let-row="row" ngx-datatable-cell-template>
              â‚¹ {{ row.amount | number:'1.2-2' }}
            </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column name="Transaction No" sortable="false"  prop="pTxn"></ngx-datatable-column>
          <ngx-datatable-column name="Particulars"  sortable="false" prop="pPart"></ngx-datatable-column>
          <ngx-datatable-column name="Type" sortable="false" prop="pType"></ngx-datatable-column>
        </ngx-datatable>

        <ngx-datatable
          class="bootstrap mt-4"
          [rows]="bankSummary"
          [headerHeight]="40"
          [rowHeight]="40"
          [columnMode]="'force'">
          <ngx-datatable-column name="Bank Name" sortable="false"  prop="bank"></ngx-datatable-column>
          <ngx-datatable-column name="Opening Balance" sortable="false"  prop="opening"></ngx-datatable-column>
          <ngx-datatable-column name="Receipts" sortable="false" prop="receipts"></ngx-datatable-column>
          <ngx-datatable-column name="Payments" sortable="false"  prop="payments"></ngx-datatable-column>
          <ngx-datatable-column name="Closing Balance" sortable="false" prop="closing"></ngx-datatable-column>
        </ngx-datatable>

      </form>
    </div>

