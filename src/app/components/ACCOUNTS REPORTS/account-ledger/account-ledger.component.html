<div class="screen-container">
  <div class="screen-card">

    <div class="screen-header">
      <h2>Account Ledger</h2>
    </div>

    <div class="screen-content">

      <form [formGroup]="AccountLedger">

        <div class="row">

          <!-- Ledger -->
          <div class="col-xl-3 col-md-3 form-group">
            <label>Ledger</label>
            <ng-select [items]="ledgeraccountslist" bindLabel="pledgername" bindValue="pledgerid"
              placeholder="Select Ledger" formControlName="pledgerid" (change)="ledgerName_Change($event)">
            </ng-select>

            <div class="text-danger">{{ LedgerValidationErrors?.pledgerid }}</div>
          </div>

          <div class="col-xl-3 col-md-3 form-group">
            <label>Sub Ledger</label>
            <ng-select [items]="subledgeraccountslist" bindLabel="psubledgername" bindValue="psubledgerid"
              placeholder="Select Sub Ledger" formControlName="psubledgerid" (change)="subledgerName_Change($event)"
              [disabled]="!AccountLedger.controls['pledgerid'].value">
            </ng-select>

            <!-- Show error only when Sub Ledger is touched AND Ledger is not selected -->
            <div class="text-danger"
              *ngIf="AccountLedger.controls['psubledgerid'].touched && !AccountLedger.controls['pledgerid'].value">
              Please select Ledger first
            </div>
          </div>

          <div class="col-xl-3 col-md-3 form-group">

            <div class="form-group">
              <label class="required-field">From Date</label>
              <input class="form-control w-auto" type="text" title="Date" id="todate" formControlName="fromDate"
                placeholder="" [bsConfig]="dpConfig" #dp="bsDatepicker" bsDatepicker placement="bottom"
                [disabled]="false"onkeydown="return false">
            </div>




            <!-- <input type="text" class="form-control" bsDatepicker [(ngModel)]="fromDate" 
              name="fromDate"
                        [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" onkeydown="return false"> -->
            <!-- <input type="text" class="form-control" bsDatepicker [(ngModel)]="fromDate" name="fromDate"
              [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }" onkeydown="return false"> -->
            <!-- <span class="input-group-text" (click)="fromDp.toggle()"> -->
            <!-- <i class="fa-solid fa-calendar-days"></i> -->
            <!-- </span> -->
          </div>


          <div class="col-xl-3 col-md-3 form-group">
            
            <div class="form-group">
              <label class="required-field">To Date</label>
              <input class="form-control w-auto" type="text" title="Date" id="todate" formControlName="toDate"
                placeholder="" [bsConfig]="dpConfig" #dp="bsDatepicker" bsDatepicker placement="bottom"
                [disabled]="false"onkeydown="return false">
            </div>
          </div>

          <!-- <div class="col-md-3">
  <label class="required-field">To Date</label>
  <div class="input-group">
    <input type="text" 
           class="form-control" 
           formControlName="toDate" 
           bsDatepicker 
           #toDp="bsDatepicker"
           [bsConfig]="{dateInputFormat: 'DD/MMM/YYYY'}"
           (bsValueChange)="ToDateChange($event)" 
           readonly
           (keydown)="$event.preventDefault()" />

    <span class="input-group-text" (click)="toDp.toggle()">
      <i class="fa-solid fa-calendar-days"></i>
    </span>
  </div>
</div> -->


          <div class="col-xl-3 col-md-3 form-group">
            <div class="d-inline-flex align-items-center">
              <input type="checkbox" id="WithNarration" (change)="CheckNarration($event)" />
              <label for="WithNarration" class="ml-2">With Narration</label>
            </div>
          </div>


          <div class="col-xl-3 col-md-3 form-group">
            <button type="button" class="btn btn-primary" (click)="GenerateReport()">
              {{ savebutton }}
            </button>
          </div>

        </div>
      </form>


      <div class="section-content mt-2" [hidden]="Showhide">

        <div class="d-flex justify-content-end mr-3 mt-4">
          <button class="icon-btn" (click)="pdfOrprint('Pdf')" title="PDF">
            <i class="fa-solid fa-file-pdf"></i>
          </button>

          <button class="icon-btn" (click)="pdfOrprint('Print')" title="Print">
            <i class="fa-solid fa-print"></i>
          </button>

          <button class="icon-btn" (click)="exportExcel()" title="Excel">
            <i class="fa-solid fa-file-excel"></i>
          </button>
        </div>

        <div class="report-header">
          <h3>Account Ledger - {{ LedgerName }} ({{ SubLedgerName }})</h3>
          <div>
            Between : {{ startDatesReport | dateformat }} And {{ endDatesReport | dateformat }}
          </div>
        </div>

        <ngx-datatable class="material expandable" [rows]="gridView" [headerHeight]="50" [rowHeight]="50"
          [footerHeight]="pageCriteria.footerPageHeight" [limit]="pageCriteria.pageSize" [offset]="pageCriteria.offset"
          [groupRowsBy]="'ptransactiondate'" [groupExpansionDefault]="true">
        </ngx-datatable>

      </div>

    </div>
  </div>
</div>