<div class="screen-container">
  <div class="screen-card">
    <div class="screen-header">
      <h2>Re Print</h2>
    </div>
    <div class="screen-content">
      <form [formGroup]="ReprintRepotForm" autocomplete="off">
        <div class="row">

          <div class="col-md-3 mb-3">
            <label class="required-field">Transaction Type</label>
            <ng-select [items]="lstreporttype" formControlName="TransType" bindLabel="reporttype" bindValue="reporttype"
              placeholder="Select" [searchable]="true" [clearable]="false" appendTo="body" (change)="reportchange_Change($event)"
              [ngClass]="{ 'is-invalid': ReprintRepotForm.get('TransType')?.touched && ReprintRepotForm.get('TransType')?.invalid }">
            </ng-select>
            <div class="text-danger mt-1"
              *ngIf="ReprintRepotForm.get('TransType')?.touched && ReprintRepotForm.get('TransType')?.errors?.['required']">
              Transaction Type is required
            </div>
          </div>

          <div class="col-md-3 mb-3" *ngIf="userbranchtxtboxshowhide">
            <label class="required-field">Transaction No.</label>
            <input appUppercase class="form-control" type="text" formControlName="Transno"
              [ngClass]="{ 'is-invalid': ReprintRepotForm.get('Transno')?.touched && ReprintRepotForm.get('Transno')?.invalid }" />
            <div class="text-danger mt-1"
              *ngIf="ReprintRepotForm.get('Transno')?.touched && ReprintRepotForm.get('Transno')?.errors?.['required']">
              Transaction No. is required
            </div>
          </div>

          <div class="col-md-3 mb-3" *ngIf="form15UID">
            <label class="required-field">PAN No.</label>
            <input appUppercase class="form-control" type="text" formControlName="panno"
              [ngClass]="{ 'is-invalid': ReprintRepotForm.get('panno')?.touched && ReprintRepotForm.get('panno')?.invalid }" />
            <div class="text-danger mt-1" *ngIf="ReprintRepotForm.get('panno')?.errors?.['pattern']">
              Invalid PAN format (ABCDE1234F)
            </div>
          </div>

          <div class="col-md-3 mb-3" *ngIf="userbranchngselectshowhide">
            <label class="required-field">CAO</label>
            <ng-select [items]="caolist" formControlName="branch_name" bindLabel="branch_name" bindValue="branch_code"
              placeholder="Select" [searchable]="true" [clearable]="false"
              [ngClass]="{ 'is-invalid': ReprintRepotForm.get('branch_name')?.touched && ReprintRepotForm.get('branch_name')?.invalid }">
            </ng-select>
            <div class="text-danger mt-1"
              *ngIf="ReprintRepotForm.get('branch_name')?.touched && ReprintRepotForm.get('branch_name')?.errors?.['required']">
              Branch selection is required
            </div>
          </div>

          <div class="col-md-3 d-flex align-items-end mb-3">
            <button type="button" class="btn btn-primary w-100" (click)="getduplicateReport()">
              Generate Report
            </button>
          </div>

        </div>
      </form>
    </div>
  </div>

  <div class="card shadow-sm" *ngIf="Showhide">
    <div class="card-body">

      <div class="row mb-3">
        <div class="col-md-4">
          <div class="input-group">
            <input type="text" class="form-control" (keyup)="ReprintdataFilter($event.target.value)" />
            <button class="btn btn-outline-secondary">
              <i class="fa fa-search">Search</i>
            </button>
          </div>
        </div>
      </div>

      <ngx-datatable class="material expandable table" [rows]="griddata" [headerHeight]="50" [rowHeight]="50"
        [footerHeight]="pageCriteria.footerPageHeight" [limit]="pageCriteria.pageSize" [offset]="pageCriteria.offset"
        columnMode="force">

        <ngx-datatable-column prop="general_receipt_number" sortable="false" name="T/R Receipt No."></ngx-datatable-column>

        <ngx-datatable-column prop="receipt_date" sortable="false" name="Receipt Date">
          <ng-template let-row="row" ngx-datatable-cell-template>
            {{ row.receipt_date ? (row.receipt_date | date:'dd/MM/yyyy') : '--NA--' }}
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column prop="receipt_number" sortable="false" name="Receipt No."></ngx-datatable-column>

        <ngx-datatable-column prop="ticketno" sortable="false" name="Chit No."></ngx-datatable-column>

        <ngx-datatable-column name="Receipt Amount" sortable="false" [cellClass]="'cell-right'">
          <ng-template let-row="row" ngx-datatable-cell-template>
            {{ currencysymbol }} {{ row.total_received_amount | number:'1.2-2' }}
          </ng-template>
        </ngx-datatable-column>

      </ngx-datatable>

    </div>
  </div>
</div>