<div class="screen-container">
  <div class="screen-card">
    <div class="screen-header">
      <h2>Pending Transfer Report</h2>
    </div>

    <div class="screen-content">
      <form [formGroup]="reportForm">

        <div class="row g-3">

          <div class="col-md-4">
            <label class="required-field">Branch</label>
            <select class="form-control" formControlName="branch">
              <option value="">Select Branch</option>
              <option>Branch A</option>
              <option>Branch B</option>
            </select>
            <div class="text-danger" *ngIf="submitted && f['branch'].errors">
              Branch is required
            </div>
          </div>

          <div class="col-md-4">
            <label class="required-field">Type of Payment</label>
            <select class="form-control" formControlName="paymentType">
              <option value="">Select</option>
              <option>Cash</option>
              <option>Cheque</option>
              <option>Online</option>
            </select>
            <div class="text-danger" *ngIf="submitted && f['paymentType'].errors">
              Payment type is required
            </div>
          </div>

          <div class="col-md-4 text-end">
            <button type="button" class="btn btn-primary mt-4" (click)="generateReport()">Generate Report</button>
          </div>

        </div>

      </form>

      <div class="card shadow-sm mt-4" *ngIf="showTable">
        <div class="card-body">

          <div class="row mb-3 align-items-center">
            <div class="col-md-5 offset-md-7">
              <input type="text" class="form-control" placeholder="Pending Days Filter" [(ngModel)]="pendingDaysFilter" (input)="applyFilter()">
            </div>
          </div>

          <div class="mt-2">
            <ngx-datatable
              class="material striped"
              [rows]="filteredRows"
              [columnMode]="'force'"
              [headerHeight]="45"
              [footerHeight]="50"
              [rowHeight]="'auto'">

              <ngx-datatable-column name="Branch Name" prop="branchName"></ngx-datatable-column>
              <ngx-datatable-column name="Chit No." prop="chitNo"></ngx-datatable-column>
              <ngx-datatable-column name="Subscriber Name" prop="subscriberName"></ngx-datatable-column>
              <ngx-datatable-column name="Chit Status" prop="chitStatus"></ngx-datatable-column>
              <ngx-datatable-column name="Receipt No." prop="receiptNo"></ngx-datatable-column>
              <ngx-datatable-column name="Receipt Date" prop="receiptDate"></ngx-datatable-column>
              <ngx-datatable-column name="Tr Date" prop="trDate"></ngx-datatable-column>

              <ngx-datatable-column name="Receipt Amount" prop="amount">
                <ng-template let-row="row" ngx-datatable-cell-template>
                  <div class="text-end">{{ row.amount | number:'1.2-2' }}</div>
                </ng-template>
                <ng-template ngx-datatable-footer-template>
                  <div class="text-end fw-bold pe-2">
                    Total: â‚¹ {{ totalPendingAmount | number:'1.2-2' }}
                  </div>
                </ng-template>
              </ngx-datatable-column>

              <ngx-datatable-column name="Pending Days" prop="pendingDays"></ngx-datatable-column>
              <ngx-datatable-column name="Due Months" prop="dueMonths"></ngx-datatable-column>
              <ngx-datatable-column name="Reference Number" prop="referenceNo"></ngx-datatable-column>
              <ngx-datatable-column name="Reference Date" prop="referenceDate"></ngx-datatable-column>
              <ngx-datatable-column name="Bank Name" prop="bankName"></ngx-datatable-column>

            </ngx-datatable>
          </div>

        </div>
      </div>

    </div>
  </div>
</div>
