<div class="screen-container">
  <div class="screen-card">
    <div class="screen-header">
      <h2>Pending Transfer Report</h2>
    </div>

    <div class="screen-content">
      <form [formGroup]="pendingtransferform" autocomplete="off">
        <div class="row g-3">

          <div class="col-md-4" *ngIf="branchcao">
            <label class="required-field">Branch</label>
            <ng-select [items]="CAOBranchList" formControlName="kgmsbranchschema" bindLabel="branch_name"
              bindValue="branch_code" placeholder="Select" [searchable]="true" appendTo="body" [clearable]="false"
              (change)="Caobranchchange($event)"
              [ngClass]="{ 'is-invalid': f['kgmsbranchschema'].invalid && f['kgmsbranchschema'].touched }">
            </ng-select>

            <div *ngIf="f['kgmsbranchschema'].errors?.['required'] && f['kgmsbranchschema'].touched"
              class="text-danger mt-1">
              Branch is required
            </div>
          </div>

          <div class="col-md-4" *ngIf="branchkgms">
            <label class="required-field">Branch</label>
            <ng-select [items]="kgmsBranchList" formControlName="userbranchname" bindLabel="branchname"
              bindValue="branchschema" placeholder="Select" [searchable]="true" [clearable]="false"
              (change)="kgmsBranch_Change($event)"
              [ngClass]="{ 'is-invalid': f['userbranchname'].invalid && f['userbranchname'].touched }">
            </ng-select>

            <div *ngIf="f['userbranchname'].errors?.['required'] && f['userbranchname'].touched"
              class="text-danger mt-1">
              Branch is required
            </div>
          </div>

          <div class="col-md-4">
            <label class="required-field">Type of Payment</label>
            <select class="form-control" formControlName="ptypeofpayment" (change)="typeofPaymentChange($event)"
              [ngClass]="{ 'is-invalid': f['ptypeofpayment'].invalid && f['ptypeofpayment'].touched }">

              <option value="">Select</option>
              <option *ngFor="let t of modeoftransactionslist" [value]="t.ptranstype">
                {{ t.ptypeofpayment }}
              </option>
            </select>

            <div *ngIf="f['ptypeofpayment'].errors?.['required'] && f['ptypeofpayment'].touched"
              class="text-danger mt-1">
              Type of Payment is required
            </div>
          </div>

          <div class="col-md-12 text-end mt-3">
            <button class="btn btn-primary px-4" type="button" (click)="GenerateReport()"
              [disabled]="disablesavebutton">
              <i class="fa" [ngClass]="{'fa-spin fa-spinner': disablesavebutton}"></i>
              {{ savebutton }}
            </button>
          </div>

        </div>
      </form>
    </div>
  </div>
  <div class="card shadow-sm mt-4">
    <div class="card-body">

      <div class="row mb-3 align-items-center">
        <div class="col-md-5 offset-md-5" *ngIf="showhidetable">
          <input type="text" class="form-control" placeholder="Pending Days Filter"
            (keyup)="betweendaysFilter($event.target.value)">
        </div>

        <div class="col-md-2 text-end" *ngIf="showicons">
          <button class="btn btn-outline-danger btn-sm" (click)="pdfOrprint('pdf')">
            <i class="fa fa-file-pdf me-1"></i> PDF
          </button>

          <button class="btn btn-outline-success btn-sm" (click)="export()">
            <i class="fa fa-file-excel me-1"></i> Excel
          </button>
          <button class="btn btn-outline-secondary btn-sm" (click)="pdfOrprint('print')">
            <i class="fa fa-print me-1"></i> Print
          </button>
        </div>
      </div>

      <div *ngIf="dataisempty" class="text-center text-muted">
        No Records to Display
      </div>

      <p-table *ngIf="showhidetable" [value]="gridData" [paginator]="true" [rows]="pageCriteria.pageSize"
        [first]="pageCriteria.offset * pageCriteria.pageSize" [totalRecords]="pageCriteria.totalrows"
        [scrollable]="true" scrollHeight="400px" rowGroupMode="subheader" groupRowsBy="modeofreceipt"
        sortField="modeofreceipt" [sortOrder]="1" [customSort]="true" (sortFunction)="onSort($event)"
        responsiveLayout="scroll" styleClass="p-datatable-gridlines">

        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="modeofreceipt">
              Mode of Receipt
              <p-sortIcon field="modeofreceipt"></p-sortIcon>
            </th>
          </tr>
        </ng-template>

        <ng-template pTemplate="groupheader" let-rowData>
          <tr>
            <td class="fw-bold">
              {{ rowData.modeofreceipt }}
            </td>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-row>
          <tr>
            <td>{{ row.modeofreceipt }}</td>
          </tr>
        </ng-template>

        <ng-template pTemplate="footer">
          <tr>
            <td colspan="1">
              Page {{ pageCriteria.CurrentPage }} of {{ pageCriteria.TotalPages }}
              ({{ pageCriteria.totalrows }} items)
            </td>
          </tr>
        </ng-template>

      </p-table>

    </div>

  </div>
</div>