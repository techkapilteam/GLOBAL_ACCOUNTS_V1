<div class="screen-container">

  <div class="screen-card">
    <div class="screen-header">
      <h2>Section Wise Report</h2>
    </div>


    <div class="screen-content">
      <form [formGroup]="TDSReport" class="screen-container">

        <div class="screen-card">

          <div class="screen-content">
            <div class="row">

              <div class="col-md-4">
                <div class="form-group">
                  <label class="required-field">TDS Section</label>
                  <select class="form-control" formControlName="pTdsSection" (change)="sectionchange($event)">
                    <option value="">-- Select Section --</option>
                    <option *ngFor="let section of tdssectionlist; trackBy: trackByFn" [value]="section.pTdsSection">
                      {{ section.pTdsSection }}
                    </option>
                  </select>
                </div>
              </div>

              <div class="col-md-4">
                <div class="form-group">
                  <label>Section Name</label>
                  <input type="text" class="form-control" [value]="sectionName" readonly>
                </div>
              </div>

            </div>
          </div>

          <div class="screen-content">
            <div class="row align-items-end">

              <div class="col-md-2">
                <div class="form-check mt-4">
                  <input type="checkbox" class="form-check-input" id="asOn" (change)="onAsOnChange($event)">
                  <label class="form-check-label" for="asOn">
                    As On
                  </label>
                </div>
              </div>

              <div class="col-md-3">
                <div class="form-group">
                  <label class="required-field">
                    {{ asOnChecked ? 'Date' : 'From Date' }}
                  </label>
                  <input type="text" class="form-control" bsDatepicker formControlName="fromDate"
                    [bsConfig]="dpFromConfig" (bsValueChange)="FromDateChange($event)" onkeydown="return false">
                </div>
              </div>

              <div class="col-md-3" *ngIf="!asOnChecked">
                <div class="form-group">
                  <label class="required-field">To Date</label>
                  <input type="text" class="form-control" bsDatepicker formControlName="toDate" [bsConfig]="dpToConfig"
                    (bsValueChange)="ToDateChange($event)" onkeydown="return false">
                </div>
              </div>

              <div class="col-md-2">
                <div class="form-check mt-4">
                  <input type="checkbox" class="form-check-input" id="summary" (change)="onSummaryChange($event)">
                  <label class="form-check-label" for="summary">
                    Summary
                  </label>
                </div>
              </div>

              <div class="col-md-2">
                <button type="button" class="btn btn-primary w-100 mt-3" (click)="generatetdsreport()"
                  [disabled]="isLoading">
                  {{ savebutton }}
                </button>
              </div>

            </div>
          </div>

        </div>
      </form>

      <div class="row mt-4" *ngIf="showResult && !isSummary">

        <div class="col-md-12">

          <p-table [value]="gridData" [paginator]="true" [rows]="10" [scrollable]="true" scrollHeight="400px"
            responsiveLayout="scroll" styleClass="p-datatable-gridlines">

            <ng-template pTemplate="header">
              <tr>
                <th>Section</th>
                <th>From Date</th>
                <th>To Date</th>
                <th class="text-end">Amount</th>
              </tr>
            </ng-template>

            <ng-template pTemplate="body" let-row>
              <tr>
                <td>{{ row.pTdsSection }}</td>
                <td>{{ row.fromDate }}</td>
                <td>{{ row.toDate }}</td>
                <td class="text-end">
                  ₹ {{ row.amount | number:'1.2-2' }}
                </td>
              </tr>
            </ng-template>

          </p-table>

        </div>
      </div>

      <div class="row mt-4" *ngIf="showResult && isSummary">

        <div class="col-md-12">

          <p-table [value]="summaryData" [scrollable]="true" scrollHeight="400px" styleClass="p-datatable-gridlines">

            <ng-template pTemplate="header">
              <tr>
                <th>Section</th>
                <th class="text-end">Total Amount</th>
              </tr>
            </ng-template>

            <ng-template pTemplate="body" let-row>
              <tr>
                <td>{{ row.pTdsSection }}</td>
                <td class="text-end">
                  ₹ {{ row.amount | number:'1.2-2' }}
                </td>
              </tr>
            </ng-template>

          </p-table>

        </div>
      </div>
    </div>
  </div>
</div>