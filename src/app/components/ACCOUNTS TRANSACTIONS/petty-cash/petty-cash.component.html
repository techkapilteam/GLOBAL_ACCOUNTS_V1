<form [formGroup]="paymentVoucherForm" autocomplete="off">
  <div class="row">
    <div class="col-md-12 col-xl-12">
      <div class="section-content">
        <div class="row">
          <div class="col-md-12 col-xl-12">
            <!-- <p class="bc-2">Payment Voucher</p> -->
          </div>

          <div class="col-md-6 col-xl-4">
            <div class="form-group">
              <label class="required-field">Date</label>
              <fieldset [disabled]="!disabletransactiondate">
                <input class="form-control" readonly type="text" [bsConfig]="ppaymentdateConfig" bsDatepicker
                  formControlName="ppaymentdate" [ngClass]="{ 'is-invalid': formValidationMessages?.ppaymentdate }">
              </fieldset>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-12 col-xl-12">
      <div class="section-content mt-2">
        <p class="bc-2">Mode of Payment</p>
        <div class="form-group mt-2  pl-0" id="pmodofpayment" title="Mode of Paymen">
          <div class="form-check form-check-inline radio-btn ">
            <input class="form-check-input" type="radio" name="pmodofpayment" formControlName="pmodofpayment" id="cash"
              value="CASH" (change)="modeofPaymentChange()">
            <label class="mt-1 w-m-100 text-center" for="cash"> Cash - {{currencySymbol}}
              {{cashBalance }} </label>
          </div>
          <div class="form-check form-check-inline radio-btn " *ngIf="showModeofPayment">
            <input class="form-check-input" type="radio" name="pmodofpayment" formControlName="pmodofpayment"
              id="Instrument" value="BANK" (change)="modeofPaymentChange()">
            <label class="mt-1 w-m-100 text-center" for="Instrument"> Bank - {{currencySymbol}}
              {{bankBalance }}</label>
          </div>

          <!--<div class="form-check form-check-inline radio-btn ">
                <input class="form-check-input" type="radio" name="pmodofpayment" formControlName="pmodofpayment" id="wallet" value="WALLET" (change)="modeofPaymentChange()">
                <label class="mt-1 w-m-100 text-center" for="wallet"> Wallet - 1,000 Dr</label>
              </div>-->
        </div>
        <div class="Instrument" *ngIf="showModeofPayment">
          <div class="row">
            <div class="ml-3 mb-3 rounded border pl-2 pr-2 badge-light " *ngIf="showtranstype" id="ptranstype"
              title="Trans Type">
              <div class="form-check form-check-inline radio-btn-secondary">
                <input class="form-check-input" type="radio" name="ptranstype" formControlName="ptranstype"
                  (change)="transofPaymentChange()" id="cheque" value="CHEQUE" checked>
                <label class="mt-1" for="cheque"> Cheque </label>
              </div>

              <div class="form-check form-check-inline radio-btn-secondary">
                <input class="form-check-input " type="radio" name="ptranstype" formControlName="ptranstype"
                  (change)="transofPaymentChange()" id="net" value="ONLINE">
                <label class="mt-1" for="net"> Online </label>
              </div>

              <div class="form-check form-check-inline radio-btn-secondary">
                <input class="form-check-input " type="radio" name="ptranstype" formControlName="ptranstype"
                  (change)="transofPaymentChange()" id="debit" value="DEBIT CARD">
                <label class="mt-1" for="debit"> Debit Card </label>
              </div>
              <!--<div class="form-check form-check-inline radio-btn-secondary">
                    <input class="form-check-input " type="radio" name="ptranstype" formControlName="ptranstype" (change)="transofPaymentChange()" id="Credit" value="CREDIT CARD">
                    <label class="mt-1" for="Credit"> Credit Card </label>
                  </div>-->
            </div>

            <div class="col-md-12 col-xl-12">
              <div class="cheque ">
                <div class="row">
                  <div class="col-md-3">
                    <div class="form-group" *ngIf="showbankcard">
                      <label>Bank Name</label>
                      <select class="form-control" id="pbankname" title="Bank Name" formControlName="pbankid"
                        [ngClass]="{ 'is-invalid': formValidationMessages.pbankname }"
                        (change)="bankName_Change($event)">
                        <option value="" ng-selected="selected">Select</option>
                        <option *ngFor="let bank of banklist;trackBy: trackByFn" [value]="bank.pbankid">
                          {{bank.pbankname}}</option>
                      </select>
                      <app-validation-message [messgae]="formValidationMessages?.pbankname"></app-validation-message>

                    </div>
                    <div class="form-group" *ngIf="!showbankcard">
                      <label>{{displayCardName}} </label>
                      <select class="form-control" id="pCardNumber" title="{{displayCardName}}"
                        formControlName="pCardNumber" [ngClass]="{ 'is-invalid': formValidationMessages.pCardNumber }"
                        (change)="debitCard_Change()">
                        <option value="" ng-selected="selected">Select</option>
                        <option *ngFor="let debitcard of debitcardlist;trackBy: trackByFn"
                          [value]="debitcard.pCardNumber">{{debitcard.pCardNumber}}</option>
                      </select>
                      <app-validation-message [messgae]="formValidationMessages?.pCardNumber">
                      </app-validation-message>
                    </div>
                  </div>

                  <div class="col-md-3" *ngIf="showTypeofPayment">
                    <div class="form-group">
                      <label>Type of Payment</label>
                      <select class="form-control " id="ptypeofpayment" title="Type of Payment"
                        formControlName="ptypeofpayment" (change)="typeofPaymentChange()"
                        [ngClass]="{ 'is-invalid': formValidationMessages.ptypeofpayment }">
                        <option value="" ng-selected="selected">Select</option>
                        <option *ngFor="let typeofpayment of typeofpaymentlist;trackBy: trackByFn"
                          [value]="typeofpayment.ptypeofpayment">{{typeofpayment.ptypeofpayment}}</option>

                      </select>
                      <app-validation-message [messgae]="formValidationMessages?.ptypeofpayment">
                      </app-validation-message>
                    </div>
                  </div>
                  <div class="col-md-3" *ngIf="showbranch">
                    <div class="form-group">
                      <label>Branch Name</label>
                      <input class="form-control" type="text" readonly placeholder="Branch Name" id="pbranchname"
                        title="Branch Name" formControlName="pbranchname">
                      <app-validation-message [messgae]="formValidationMessages?.pbranchname">
                      </app-validation-message>
                    </div>
                  </div>
                  <div class="col-md-3" *ngIf="showfinancial">
                    <div class="form-group">
                      <label>Bank / Financial Services</label>
                      <input class="form-control" type="text" readonly id="pbankname" title="Bank / Financial Services"
                        formControlName="pbankname">
                      <app-validation-message [messgae]="formValidationMessages?.pbankname"></app-validation-message>
                    </div>
                  </div>

                  <div id="UPI1" class="col-md-3" *ngIf="showupi">

                    <div class="form-group">
                      <label>UPI</label>
                      <select class="form-control" id="pUpiname" title="UPI" formControlName="pUpiname"
                        [ngClass]="{ 'is-invalid': formValidationMessages.pUpiname }" (change)="upiName_Change($event)">
                        <option value="" ng-selected="selected">Select</option>
                        <option *ngFor="let upinames of upinameslist;trackBy: trackByFn" [value]="upinames.pUpiname">
                          {{upinames.pUpiname}}</option>
                      </select>
                      <app-validation-message [messgae]="formValidationMessages?.pUpiname"></app-validation-message>
                    </div>
                  </div>

                  <div id="UPI2" class="col-md-3" *ngIf="showupi">

                    <div class="form-group">
                      <label>UPI ID</label>
                      <select class="form-control" id="pUpiid" title="UPI ID" formControlName="pUpiid"
                        [ngClass]="{ 'is-invalid': formValidationMessages.pUpiid }" (change)="upid_change()">
                        <option value="" ng-selected="selected">Select</option>
                        <option *ngFor="let upinames of upiidlist;trackBy: trackByFn" [value]="upinames.pUpiid">
                          {{upinames.pUpiid}}</option>
                      </select>
                      <app-validation-message [messgae]="formValidationMessages?.pUpiid"></app-validation-message>
                    </div>
                  </div>



                  <div class="col-md-3 cheque ">
                    <div class="form-group">
                      <label id="pChequenumber" title="{{displaychequeno}}">{{displaychequeno}}</label>
                      <select class="form-control" formControlName="pChequenumber"
                        [ngClass]="{ 'is-invalid': formValidationMessages.pChequenumber }" *ngIf="showchequno"
                        (change)="chequenumber_Change()">
                        <option value="" ng-selected="selected">Select</option>
                        <option *ngFor="let chequenumbers of chequenumberslist;trackBy: trackByFn"
                          [value]="chequenumbers.pChequenumber">{{chequenumbers.pChequenumber}}</option>
                      </select>
                      <input class="form-control" type="text" placeholder="{{displaychequeno}}"
                        formControlName="pChequenumber" appAlphanumeric maxlength="20"
                        [ngClass]="{ 'is-invalid': formValidationMessages.pChequenumber }" *ngIf="!showchequno"
                        (blur)="chequenumber_Change()">
                      <app-validation-message [messgae]="formValidationMessages?.pChequenumber">
                      </app-validation-message>
                    </div>
                  </div>


                  <div class="col-md-12 col-xl-12 mb-2">
                    <div id="sbi-bal">
                      <span class="badge-info badge p-1 font-weight-light ">Bank Book -
                        {{bankbookBalance }} </span>
                      <span class="badge-warning badge p-1 font-weight-light">Pass Book -
                        {{bankpassbookBalance }} </span>
                    </div>

                  </div>

                </div>
              </div>

            </div>
          </div>
        </div>
        <!-- cheque-radio-toggle -->

      </div>
    </div>

  </div>





  <div class="section-content mt-2" formGroupName="ppaymentsslistcontrols">
    <div class="row">
      <div class="col-md-6 col-xl-4">
        <div class="form-group">
          <div class="input-group d-block">
            <label id="pledgerid" class="required-field" title="Ledger">Ledger</label>
            <ng-select id="pledgername" title="Ledger" [items]="ledgeraccountslist" formControlName="pledgerid"
              groupBy="pAccounttype" bindLabel="pledgername" bindValue="pledgerid" [multiple]=false placeholder="Select"
              [searchable]=true [clearable]=false dropdownPosition="bottom" [clearOnBackspace]=true
              (change)="ledgerName_Change($event)" [ngClass]="{ 'is-invalid': formValidationMessages.pledgername }">
              <ng-template ng-optgroup-tmp let-item="item">
                {{item.pAccounttype}}
              </ng-template>
            </ng-select>

            <span class=" position-absolute font-italic" style="right:-160px; top:35px;">{{ledgerBalance }}</span>
          </div>
          <app-validation-message [messgae]="formValidationMessages?.pledgername"></app-validation-message>

        </div>

        <div class="form-group" *ngIf="showsubledger">
          <div class="input-group d-block">
            <label id="psubledgername" class="required-field" title="Sub Ledger">Sub Ledger</label>
            <ng-select id="psubledgername" title="Sub Ledger" [items]="subledgeraccountslist"
              formControlName="psubledgerid" bindLabel="psubledgername" bindValue="psubledgerid" [multiple]=false
              placeholder="Select" [searchable]=true [clearable]=true dropdownPosition="bottom" [clearOnBackspace]=true
              (change)="subledger_Change($event)" [ngClass]="{ 'is-invalid': formValidationMessages.psubledgername }">
            </ng-select>
            <!--<div class="input-group-append">
                <button class="btn btn-lg-icon rounded-right px-2 p-0"> <img src="assets/images/icon-add-blue.svg" class="" width="20px" height="20px"></button>
              </div>-->
            <span class=" position-absolute font-italic" style="right:-160px; top:30px;">{{subledgerBalance }}</span>
          </div>
          <app-validation-message [messgae]="formValidationMessages?.psubledgername"></app-validation-message>

        </div>

        <div class="form-group">
          <div class="input-group d-block">
            <label id="ppartyid" class="required-field" title="Party">Party</label>
            <ng-select id="ppartyname" title="Party" [items]="partylist" formControlName="ppartyid"
              bindLabel="ppartyname" bindValue="ppartyid" [multiple]=false placeholder="Select" [searchable]=true
              [clearable]=true dropdownPosition="bottom" [clearOnBackspace]=true (change)="partyName_Change($event)"
              [ngClass]="{ 'is-invalid': formValidationMessages.ppartyname }">
            </ng-select>
            <!--<div class="input-group-append">
                <button class="btn btn-lg-icon px-2 rounded-right p-0"> <img src="assets/images/icon-add-blue.svg" class="" width="20px" height="20px"></button>
              </div>-->
            <app-validation-message [messgae]="formValidationMessages?.ppartyname"></app-validation-message>
            <span class=" position-absolute font-italic" style="right:-160px; top:30px;">{{partyBalance }}</span>
          </div>

        </div>

        <div class="form-group">
          <label class="pl-0 pr-0" class="required-field">Amount Paid</label>
          <input class="form-control border-warning sec-head-bold " style="text-align:right;" type="text" placeholder=""
            id="pactualpaidamount" title="Amount Paid" formControlName="pactualpaidamount"
            [ngClass]="{ 'is-invalid': formValidationMessages.pactualpaidamount }" (blur)="pamount_change()"
            appRoundecimal="12@0" appMycurrencyFormatter>
          <app-validation-message [messgae]="formValidationMessages?.pactualpaidamount"></app-validation-message>
        </div>
      </div>
      <div class="col-md-6 col-xl-6 offset-2 pt-2">
        <div class="form-group">
          <div class="border rounded p-2 mt-3">
            <div class="col-md-12 col-xl-12 mt-2 mb-2">
              <fieldset [disabled]="disablegst">
                <div class="material-switch">
                  <span class="mr-2" id="pisgstapplicable" title="GST"> GST </span>
                  <input id="gst-switch" name="gst-switch" formControlName="pisgstapplicable" type="checkbox"
                    (change)="isgstapplicable_Checked();">
                  <label for="gst-switch" class="badge-success" data-toggle="collapse" data-target="#gst"></label>
                </div>
              </fieldset>
              <div id="gst" *ngIf="!showgst">
                <div class="row">
                  <fieldset [disabled]="disablegst">
                    <div class="col-md-12 col-xl-12" id="pgstcalculationtype" title="GST Calculation Type">
                      <div class="form-check form-check-inline radio-btn-secondary mr-4">
                        <input class="form-check-input" type="radio" id="procgstinc"
                          formControlName="pgstcalculationtype" name="pgstcalculationtype" value="INCLUDE"
                          (change)="claculategsttdsamounts()"
                          [ngClass]="{ 'is-invalid': formValidationMessages.pgstcalculationtype }" id="procgstinc">
                        <label class="mt-1" for="procgstinc"> Include</label>
                      </div>
                      <div class="form-check form-check-inline radio-btn-secondary mr-4 mb-2 mt-2">
                        <input class="form-check-input" type="radio" id="procgstexc"
                          formControlName="pgstcalculationtype" name="pgstcalculationtype" value="EXCLUDE"
                          [ngClass]="{ 'is-invalid': formValidationMessages.pgstcalculationtype }"
                          (change)="claculategsttdsamounts()" id="procgstexc">
                        <label class="mt-1" for="procgstexc"> Exclude </label>
                      </div>
                      <app-validation-message [messgae]="formValidationMessages?.pgstcalculationtype">
                      </app-validation-message>

                    </div>
                  </fieldset>
                  <div class="col-md-12 col-xl-12">
                    <div class="row">
                      <div class="form-group col-md-4">
                        <label class="required-field">State</label>
                        <select class="form-control" id="pState" title="State" formControlName="pStateId"
                          [ngClass]="{ 'is-invalid': formValidationMessages.pState }" (change)="state_change($event)">
                          <option value="" ng-selected="selected">Select</option>
                          <option *ngFor="let state of statelist;trackBy: trackByFn" [value]="state.pStateId">
                            {{state.pState}}</option>
                        </select>
                        <app-validation-message [messgae]="formValidationMessages?.pState"></app-validation-message>
                      </div>

                      <div class="form-group col-md-4" *ngIf="showgstno">
                        <label>GST No.</label>
                        <input type="text" class="form-control col-md-12" maxlength="15" appAlphanumeric appUppercase
                          id="pgstno" title="GST No." formControlName="pgstno" name="pgstno"
                          [ngClass]="{ 'is-invalid': formValidationMessages.pgstno }" (blur)="gsno_change()" />

                        <app-validation-message [messgae]="formValidationMessages?.pgstno"></app-validation-message>

                      </div>
                      <div class="form-group col-md-4">
                        <label class="required-field">GST(%)</label>
                        <ng-select [items]="gstlist" bindLabel="pgstpercentage" bindValue="pgstpercentage"
                          placeholder="Select" formControlName="pgstpercentage"
                          [ngClass]="{ 'is-invalid': formValidationMessages.pgstpercentage }"
                          (change)="gst_Change($event)">
                        </ng-select>

                        <app-validation-message [messgae]="formValidationMessages?.pgstpercentage">
                        </app-validation-message>
                      </div>
                    </div>

                    <div class="row" [formGroup]="paymentVoucherForm.get('ppaymentsslistcontrols')?.value">
                      <div class="form-group col-md-8" *ngIf="showgstamount">
                        <label>Amount</label>
                        <label class="form-control col-md-12 text-right pt-2">
                          {{ currencySymbol }} {{ paymentVoucherForm.get('ppaymentsslistcontrols.pgstamount')?.value |
                          currency:currencyCode:'symbol':'1.2-2' }}
                        </label>
                      </div>

                      <div class="form-group col-md-6" *ngIf="showigst">
                        <label>IGST({{ paymentVoucherForm.get('ppaymentsslistcontrols.pigstpercentage')?.value
                          }}%)</label>
                        <label class="col-md-12">
                          {{ currencySymbol }} {{ paymentVoucherForm.get('ppaymentsslistcontrols.pigstamount')?.value |
                          currency:currencyCode:'symbol':'1.2-2' }}
                        </label>
                      </div>

                      <div class="form-group col-md-6" *ngIf="showcgst">
                        <label>CGST({{ paymentVoucherForm.get('ppaymentsslistcontrols.pcgstpercentage')?.value
                          }}%)</label>
                        <label class="col-md-12">
                          {{ currencySymbol }} {{ paymentVoucherForm.get('ppaymentsslistcontrols.pcgstamount')?.value |
                          currency:currencyCode:'symbol':'1.2-2' }}
                        </label>
                      </div>

                      <div class="form-group col-md-6" *ngIf="showsgst">
                        <label>SGST({{ paymentVoucherForm.get('ppaymentsslistcontrols.psgstpercentage')?.value
                          }}%)</label>
                        <label class="col-md-12">
                          {{ currencySymbol }} {{ paymentVoucherForm.get('ppaymentsslistcontrols.psgstamount')?.value |
                          currency:currencyCode:'symbol':'1.2-2' }}
                        </label>
                      </div>

                      <div class="form-group col-md-6" *ngIf="showutgst">
                        <label>UTGST({{ paymentVoucherForm.get('ppaymentsslistcontrols.putgstpercentage')?.value
                          }}%)</label>
                        <label class="col-md-12">
                          {{ currencySymbol }} {{ paymentVoucherForm.get('ppaymentsslistcontrols.putgstamount')?.value |
                          currency:currencyCode:'symbol':'1.2-2' }}
                        </label>
                      </div>
                    </div>


                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>


        <div class="form-group">
          <div class="border rounded p-2 mt-3">
            <div class="col-md-12 col-xl-12 mt-2 mb-2">
              <div class="material-switch">
                <span class="mr-2" id="pistdsapplicable" title="TDS"> TDS </span>
                <input id="tds-switch" name="tds-switch" formControlName="pistdsapplicable" type="checkbox"
                  (change)="istdsapplicable_Checked()"
                  [ngClass]="{ 'is-invalid': formValidationMessages.pistdsapplicable }">
                <label for="tds-switch" class="badge-success" data-toggle="collapse" data-target="#tds"></label>
              </div>
              <div id="tds" *ngIf="!showtds">
                <div class="row">
                  <fieldset [disabled]="disablegst">
                    <div class="col-md-12 col-xl-12" id="ptdscalculationtype" title="TDS Calculation Type">
                      <div class="form-check form-check-inline radio-btn-secondary mr-4 ">
                        <input class="form-check-input" type="radio" id="tdsinclude" value="INCLUDE"
                          formControlName="ptdscalculationtype" name="ptdscalculationtype"
                          [ngClass]="{ 'is-invalid': formValidationMessages.ptdscalculationtype }"
                          (change)="claculategsttdsamounts()">
                        <label class="mt-1" for="tdsinclude"> Include</label>
                      </div>
                      <div class="form-check form-check-inline radio-btn-secondary mr-4 mb-2 mt-2">
                        <input class="form-check-input" type="radio" id="tdsexcluded" value="EXCLUDE"
                          formControlName="ptdscalculationtype" name="ptdscalculationtype"
                          [ngClass]="{ 'is-invalid': formValidationMessages.ptdscalculationtype }"
                          (change)="claculategsttdsamounts()">
                        <label class="mt-1" for="tdsexcluded"> Exclude</label>
                      </div>
                      <app-validation-message [messgae]="formValidationMessages?.ptdscalculationtype">
                      </app-validation-message>
                    </div>
                  </fieldset>

                </div>
                <div class="row">
                  <div class="col-md-4 col-xl-4">
                    <label class="required-field">Section</label>
                    <select class="form-control" id="pTdsSection" title="Section" formControlName="pTdsSection"
                      [ngClass]="{ 'is-invalid': formValidationMessages.pTdsSection }"
                      (change)="tdsSection_Change($event)">
                      <option value="" ng-selected="selected">Select</option>
                      <option *ngFor="let tds of tdssectionlist;trackBy: trackByFn" [value]="tds.pTdsSection">
                        {{tds.pTdsSection}}</option>

                    </select>
                    <app-validation-message [messgae]="formValidationMessages?.pTdsSection"></app-validation-message>
                  </div>
                  <div class="col-md-4 col-xl-4">
                    <label class="required-field">Percentage</label>
                    <select class="form-control" id="pTdsPercentage" title="Section" formControlName="pTdsPercentage"
                      [ngClass]="{ 'is-invalid': formValidationMessages.pTdsPercentage }" (change)="tds_Change($event)">
                      <option value="" ng-selected="selected">Select</option>
                      <option *ngFor="let tds of tdspercentagelist;trackBy: trackByFn" [value]="tds.pTdsPercentage">
                        {{tds.pTdsPercentage}}</option>

                    </select>
                    <app-validation-message [messgae]="formValidationMessages?.pTdsPercentage"></app-validation-message>
                  </div>
                  <div class="col-md-4 col-xl-4">
                    <label>Amount</label>
                    <label class="form-control col-md-12 text-right pt-2" id="ptdsamount" title="Section"
                      [ngClass]="{ 'is-invalid': formValidationMessages.ptdsamount }">{{paymentVoucherForm.get('ppaymentsslistcontrols.ptdsamount')?.value
                      | currency:currencyCode:'symbol':'1.2-2'}}</label>
                    <!--<input class="form-control" type="text" id="ptdsamount" title="Section" formControlName="ptdsamount" [ngClass]="{ 'is-invalid': formValidationMessages.ptdsamount }" />-->
                    <app-validation-message [messgae]="formValidationMessages?.ptdsamount"></app-validation-message>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class=" d-flex justify-content-end mt-4">

          <a data-toggle="tab" class="btn btn-g-icon mr-4 px-3 border-0" role="tab" aria-controls="hot"
            aria-selected="false" appButtonDoubleClick
            (debounceClick)="clearPaymentDetails()"><img src="assets/images/icon-cancel-white.svg" width="20px"
              height="20px" class="mr-3">Clear</a>




          <button appButtonDoubleClick(debounceClick)="addPaymentDetails()"
            class="btn btn-b-icon px-3 border-0" [disabled]="disableaddbutton">
            <i class="fa" [ngClass]="{'fa-spin fa-spinner': disableaddbutton, 'fa-plus': !disableaddbutton}"></i>
            {{addbutton}}
          </button>

        </div>

      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12 col-xl-12" style="height: 400;">
      <div class="section-content mt-2">
        <p-table [value]="paymentslist1" [paginator]="true" [rows]="5" [scrollable]="true" scrollHeight="400px"
          [resizableColumns]="true">
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 80px;">Actions</th>
              <th>Party Name</th>
              <th>Ledger Name</th>
              <th>Sub Ledger Name</th>
              <th>Total Paid Amount</th>
              <th>Paid Amount</th>
              <th>GST Type</th>
              <th>TDS Section</th>
              <th>GST Percentage</th>
              <th>TDS Amount</th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-row let-rowIndex="rowIndex">
            <tr>
              <!-- Actions -->
              <td>
                <!-- Delete action -->
                <label for="delete{{ rowIndex }}">
                  <div id="icon-delete" (click)="removeHandler(rowIndex)"></div>
                </label>
              </td>

              <!-- Party Name -->
              <td>{{ row.ppartyname }}</td>

              <!-- Ledger Name -->
              <td>{{ row.pledgername }}</td>

              <!-- Sub Ledger Name -->
              <td>{{ row.psubledgername }}</td>

              <!-- Total Paid Amount -->
              <td class="text-right">
                <span title="{{currencySymbol}} {{row.ptotalamount | currency:currencyCode:'symbol':'1.2-2'}}">
                  {{currencySymbol}} {{row.ptotalamount | currency:currencyCode:'symbol':'1.2-2'}}
                </span>
              </td>

              <!-- Paid Amount -->
              <td class="text-right">
                <span title="{{currencySymbol}} {{row.pamount | currency:currencyCode:'symbol':'1.2-2'}}">
                  {{currencySymbol}} {{row.pamount | currency:currencyCode:'symbol':'1.2-2'}}
                </span>
              </td>

              <!-- GST Type -->
              <td class="text-center">
                <div *ngIf="!row.pgstcalculationtype">-- NA --</div>
                <div *ngIf="row.pgstcalculationtype" title="{{row.pgstcalculationtype}}">
                  {{row.pgstcalculationtype}}
                </div>
              </td>

              <!-- TDS Section -->
              <td>
                <div *ngIf="!row.pTdsSection">-- NA --</div>
                <div *ngIf="row.pTdsSection" title="{{row.pTdsSection}}">
                  {{row.pTdsSection}}
                </div>
              </td>

              <!-- GST Percentage -->
              <td class="text-center">
                <div *ngIf="row.pgstpercentage === 0">-- NA --</div>
                <div *ngIf="row.pgstpercentage !== 0" title="{{row.pgstpercentage}}">
                  {{row.pgstpercentage}}
                </div>
              </td>

              <!-- TDS Amount -->
              <td class="text-right">
                <div *ngIf="row.ptdsamount === 0">-- NA --</div>
                <div *ngIf="row.ptdsamount !== 0"
                  title="{{currencySymbol}} {{row.ptdsamount | currency:currencyCode:'symbol':'1.2-2'}}">
                  {{currencySymbol}} {{row.ptdsamount | currency:currencyCode:'symbol':'1.2-2'}}
                </div>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="10">No records found.</td>
            </tr>
          </ng-template>
        </p-table>



      </div>
    </div>
  </div>

  <div class="section-content mt-2">
    <div class="row">
      <div class="col-md-6 col-xl-6 mt-4" style="height: 400;">
        <p-table [value]="partyjournalentrylist" [paginator]="true" [rows]="5" [resizableColumns]="true">
          <ng-template pTemplate="header">
            <tr>
              <th style="text-align: left;">Particulars</th>
              <th style="text-align: right;">Dr</th>
              <th style="text-align: right;">Cr</th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-row>
            <tr>
              <!-- Particulars -->
              <td style="text-align: left;">
                {{ row.accountname }}
              </td>

              <!-- Debit Amount -->
              <td style="text-align: right;">
                <div *ngIf="row.debitamount !== 0"
                  title="{{currencySymbol}} {{row.debitamount | currency:currencyCode:'symbol':'1.2-2'}}">
                  {{currencySymbol}} {{row.debitamount | currency:currencyCode:'symbol':'1.2-2'}}
                </div>
              </td>

              <!-- Credit Amount -->
              <td style="text-align: right;">
                <div *ngIf="row.creditamount !== 0"
                  title="{{currencySymbol}} {{row.creditamount | currency:currencyCode:'symbol':'1.2-2'}}">
                  {{currencySymbol}} {{row.creditamount | currency:currencyCode:'symbol':'1.2-2'}}
                </div>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="3">No records found.</td>
            </tr>
          </ng-template>
        </p-table>


      </div>

      <!-- <div class="col-md-6 col-xl-6">
        <div class="border mt-2 rounded">
          <kendo-grid [groupable]="false" [data]="gridView" [height]="" [group]="groups" [resizable]="true"
            (groupChange)="groupChange($event)">
           
           
            <kendo-grid-column field="accountname" title="Particulars" width="250"></kendo-grid-column>
            <kendo-grid-column field="debitamount" title="Dr" width="110"></kendo-grid-column>
            <kendo-grid-column field="creditamount" title="Cr" width="110"></kendo-grid-column>

          </kendo-grid>
        </div>

      </div> -->

      <div class="col-md-6 col-xl-6">
        <div class="form-group mt-2">
          <label class="required-field">Narration</label>
          <textarea class="form-control" rows="4" id="pnarration" title="Narration" formControlName="pnarration"
            maxlength="250" [ngClass]="{ 'is-invalid': formValidationMessages.pnarration }"></textarea>

          <app-validation-message [messgae]="formValidationMessages?.pnarration"></app-validation-message>

        </div>
        <!--<div class="form-group col-md-6 mt-1">
            <label>Total Amount paid</label>
            <input type="text" readonly class="form-control" rows="4" id="ptotalpaidamount" title="Total Amount paid" formControlName="ptotalpaidamount" maxlength="300" [ngClass]="{ 'is-invalid': formValidationMessages.pnarration }" />
    
            <app-validation-message [messgae]="formValidationMessages?.ptotalpaidamount"></app-validation-message>
    
          </div>-->

        <div class="form-group col-md-6 pl-0">
          <div class="form-group">
            <label id="pDocStorePath" title="Upload Document">Upload Document</label>
            <div class="input-group">
              <input type="text" class="form-control" placeholder="" [value]="imageResponse?.name" [disabled]="true"
                formControlName="pDocStorePath">
              <div class="input-group-append">
                <button class="btn btn-lg-icon px-2 p-0" (click)="fileInput.click()">
                  <img src="assets/images/icon-upload-blue.svg" class="" width="18px" height="18px">
                </button>
                <!-- to uplaod the image -->
                <input style="display: none" type="file" (change)="uploadAndProgress($event)" #fileInput>
              </div>
              <!-- <span class="text-success">
                  <ng-container *ngIf="uploadSuccess"></ng-container>
                </span> -->
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- row end -->
</form>

<!------------- save Buttons ------------>

<div class="row mt-3">
  <div class="col-md-12 col-xl-12">
    <div class="d-flex justify-content-end">

      <a data-toggle="tab" class="btn btn-g-icon mr-4 px-3 border-0" role="tab" aria-controls="hot"
        aria-selected="false" appButtonDoubleClick (debounceClick)="clearPaymentVoucher()"><img
          src="assets/images/icon-cancel-white.svg" width="20px" height="20px" class="mr-3">Clear</a>

      <!--<a data-toggle="tab" class="btn btn-b-icon px-3 border-0" role="tab" aria-controls="hot" aria-selected="false" appButtonDoubleClick [debounceTime]="1000" (debounceClick)="savePaymentVoucher()"><img src="assets/images/icon-check-white.svg" width="20px" height="20px" class="mr-3">Save</a>-->

      <!-- <button appButtonDoubleClick [debounceTime]="1000" (debounceClick)="savePaymentVoucher()"
        class="btn btn-b-icon px-3 border-0" [disabled]="disablesavebutton">
        <img src="assets/images/icon-check-white.svg" class="mr-3" width="20px" height="20px" *ngIf="!disablesavebutton">
        <i class="fa" [ngClass]="{'fa-spin fa-spinner': disablesavebutton, 'fa-check': !disablesavebutton}"></i>
        {{savebutton}}
      </button> -->

      <button (click)="savePaymentVoucher()" class="btn btn-s-icon px-3 border-0" [disabled]="disablesavebutton">
        <img src="assets/images/icon-check-white.svg" class="mr-3" width="20px" height="20px"
          *ngIf="!disablesavebutton">
        <i class="fa" [ngClass]="{'fa-spin fa-spinner': disablesavebutton}"></i> {{savebutton}}
      </button>

    </div>
  </div>
</div>
<!------------- save Buttons ------------>