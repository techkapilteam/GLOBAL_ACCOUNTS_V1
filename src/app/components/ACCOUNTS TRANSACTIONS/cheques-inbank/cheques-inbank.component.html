<div class="screen-container">
  <div class="screen-card">
    <div class="screen-header">
      <h2>Cheques In Bank</h2>
    </div>
    <div class="screen-content">
      <form>
        <div class="row mb-3">
          <!-- Transaction Date -->
          <div class="col-md-2">
            <label>Transaction Date</label>
            <input type="text"
                   class="form-control"
                   bsDatepicker
                   [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                   [(ngModel)]="transactionDate"
                   name="transactionDate"
                   readonly>
          </div>

          <!-- Cheque Clear Date -->
          <div class="col-md-2">
            <label>Cheque Clear Date</label>
            <input type="text"
                   class="form-control"
                   bsDatepicker
                   [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                   [(ngModel)]="chequesclearDate"
                   name="chequesclearDate"
                   readonly>
          </div>

          <!-- Bank Selection -->
          <div class="col-md-3">
            <label>Bank</label>
            <select class="form-select" [(ngModel)]="selectedBank" name="bank">
              <option value="">Select</option>
              <option value="SBI">SBI</option>
              <option value="HDFC">HDFC</option>
              <option value="ICICI">ICICI</option>
              <option value="IDBI">IDBI</option>
            </select>
          </div>

          <!-- Balance Info -->
          <div class="col-md-5">
            <div class="border rounded shadow-sm bg-light p-3">
              <h4 style="color:#26408A;"><u>Cheques in Bank</u></h4>
              <div class="d-flex align-items-center mt-2">
                <label>Balance :</label>
                <label class="sec-head-bold ml-2">15,74,948Dr</label>
                &nbsp;&nbsp;&nbsp;
                <label class="ml-4"> Date: {{ transactionDate | date:'dd-MMM-yyyy' }}</label>
              </div>
            </div>
          </div>
        </div>

        <!-- Search and Show -->
        <div class="row mb-3">
          <div class="col-md-4" *ngIf="activeTab !== 'Deposited' && activeTab !== 'Cancelled'">
            <input class="form-control" placeholder="Search" [(ngModel)]="searchText" name="search">
          </div>
          <div class="col-md-2" *ngIf="activeTab !== 'Deposited' && activeTab !== 'Cancelled'">
            <button type="button" class="btn btn-primary" (click)="showCheques()">Show</button>
          </div>
        </div>

        <!-- Tabs -->
        <div class="mb-3">
          <nav>
            <div class="nav nav-tabs">
              <button class="nav-link" (click)="filterTab('All')">All</button>
              <button class="nav-link" (click)="filterTab('Received')">Cheques Deposited</button>
              <button class="nav-link" (click)="filterTab('Online')">Online Receipts</button>
              <button class="nav-link" (click)="filterTab('Deposited')">Cleared</button>
              <button class="nav-link" (click)="filterTab('Cancelled')">Returned</button>
            </div>
          </nav>
        </div>

        <!-- BRS Dates for Deposited/Cancelled -->
        <div class="row mb-3" *ngIf="activeTab === 'Deposited' || activeTab === 'Cancelled'">
          <div class="col-md-3">
            <label>BRS From Date</label>
            <input type="text"
                   class="form-control"
                   bsDatepicker
                   [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                   [(ngModel)]="brsFromDate"
                   name="brsFromDate"
                   readonly>
          </div>
          <div class="col-md-3">
            <label>BRS To Date</label>
            <input type="text"
                   class="form-control"
                   bsDatepicker
                   [bsConfig]="{ dateInputFormat: 'DD-MMM-YYYY' }"
                   [(ngModel)]="brsToDate"
                   name="brsToDate"
                   readonly>
          </div>
          <div class="col-md-2 align-self-end">
            <button type="button" class="btn btn-primary" (click)="showClearedCheques()">Show</button>
          </div>
        </div>

        <!-- Cheques Table -->
        <div class="table-responsive" style="overflow-x:auto;">
          <ngx-datatable *ngIf="showTable" class="bootstrap mt-2"
                         [rows]="filteredCheques"
                         [headerHeight]="50"
                         [rowHeight]="'auto'"
                         [columnMode]="'standard'"
                         [scrollbarH]="true">

            <!-- Columns remain same -->
            <!-- Example: Cheque No -->
            <ngx-datatable-column name="Cheque/Reference No." sortable="false" prop="chequeNo" [width]="150"></ngx-datatable-column>
            <ngx-datatable-column name="Branch Name" sortable="false" prop="branchName" [width]="150"></ngx-datatable-column>
            <ngx-datatable-column name="Amount" sortable="false" prop="amount" [width]="100"></ngx-datatable-column>
            <ngx-datatable-column name="Party" sortable="false" prop="party" [width]="120"></ngx-datatable-column>

            <!-- Date columns -->
            <ngx-datatable-column *ngIf="activeTab === 'Deposited' || activeTab === 'Cancelled'" name="ReceiptDate" sortable="false"
                                  [width]="100">
              <ng-template let-row="row" ngx-datatable-cell-template>
                {{ row.date | date:'dd-MMM-yyyy' }}
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column *ngIf="activeTab === 'Deposited' || activeTab === 'Cancelled'" name="Deposited Date" sortable="false"
                                  [width]="120">
              <ng-template let-row="row" ngx-datatable-cell-template>
                {{ row.depositedDate | date:'dd-MMM-yyyy' }}
              </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column *ngIf="activeTab === 'Deposited' || activeTab === 'Cancelled'" name="Cleared Date" sortable="false"
                                  [width]="120">
              <ng-template let-row="row" ngx-datatable-cell-template>
                {{ row.clearedDate | date:'dd-MMM-yyyy' }}
              </ng-template>
            </ngx-datatable-column>

          </ngx-datatable>
        </div>

        <div *ngIf="showTable" class="d-flex justify-content-end mt-2 gap-2">
          <button type="button" class="btn btn-secondary" (click)="clearSelections()">Clear</button>
          <button type="button" class="btn btn-primary" (click)="saveSelections()">Save</button>
        </div>

      </form>
    </div>
  </div>
</div>
