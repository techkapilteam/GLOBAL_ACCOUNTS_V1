<div class="screen-container">
  <div class="screen-card">
    <div class="screen-header">
      <h2>General Receipt Cancel</h2>
    </div>
    <div class="screen-content">

      <form [formGroup]="generalrecipetcancelform" autocomplete="off">
        <div class="row g-3">
          <div class="col-md-4">
            <label class="form-label required-field">Receipt No.</label>
            <select class="form-select" formControlName="receiptNo" (change)="onSelectReceipt($event)">
              <option value="" disabled selected>Select</option>
              <option *ngFor="let r of receipts" [value]="r.id">{{ r.receiptNo }}</option>
            </select>
          </div>

          <div class="col-md-4 mt-4 pt-4">
            <button type="button" class="btn btn-primary" (click)="onShow()">Show</button>
          </div>

          <div class="col-md-4">
            <label class="form-label required-field">Date</label>
            <input type="text" class="form-control w-auto" formControlName="toDate"
              [bsConfig]="dpConfig" bsDatepicker placement="bottom">
          </div>
        </div>

        <div *ngIf="show && selectedReceipt" class="mt-3 border rounded shadow-sm p-3 bg-light">

          <div class="row mb-2">
            <div class="col-md-6"><b>Received From:</b> {{ selectedReceipt.receivedFrom }}</div>
            <div class="col-md-6 text-end"><b>Receipt Date:</b> {{ selectedReceipt.receiptDate }}</div>
          </div>

          <ngx-datatable class="bootstrap table-bordered"
                         [rows]="selectedReceipt.items"
                         [headerHeight]="40"
                         [rowHeight]="'auto'"
                         [columnMode]="'standard'"
                         [scrollbarH]="false">

            <!-- S.No Column -->
            <ngx-datatable-column name="S.No" prop="sNo" [width]="50" [resizeable]="false" [sortable]="false">
              <ng-template let-row="row" ngx-datatable-cell-template>
                <div style="text-align:center; padding:0 5px;">{{ row.sNo }}</div>
              </ng-template>
            </ngx-datatable-column>

            <!-- Particulars Column -->
            <ngx-datatable-column name="Particulars" prop="particulars" [resizeable]="true" sortable="false">
              <ng-template let-row="row" ngx-datatable-cell-template>
                <div style="padding-left:5px;">{{ row.particulars }}</div>
              </ng-template>
            </ngx-datatable-column>

            <!-- Amount Column -->
            <ngx-datatable-column name="Amount" prop="amount" [width]="120" [resizeable]="false" sortable="false">
              <ng-template let-row="row" ngx-datatable-cell-template>
                <div style="text-align:right; padding-right:5px;">â‚¹ {{ row.amount | number:'1.2-2' }}</div>
              </ng-template>
            </ngx-datatable-column>

          </ngx-datatable>

          <div class="mt-2" style="display:flex; flex-wrap:wrap; gap:20px; align-items:flex-start;">
            <div style="flex:2; min-width:300px;">
              <b>Narration:</b> {{ selectedReceipt.narration }}
            </div>
            <div style="flex:1; min-width:150px;">
              <b>Mode:</b> {{ selectedReceipt.mode }}
            </div>
            <div style="flex:1; min-width:150px;">
              <b>Done By:</b> {{ selectedReceipt.doneBy }}
            </div>
          </div>

        </div>

        <div *ngIf="show && selectedReceipt" class="row mt-3 g-3 border rounded p-3 bg-light">
          <div class="col-md-6">
            <label class="form-label required-field">Reason</label>
            <textarea class="form-control" maxlength="250"></textarea>
          </div>
          <div class="col-md-4">
            <label class="form-label required-field">Authorized By</label>
            <select class="form-select">
              <option value="" disabled selected>Select</option>
              <option>John Manager</option>
              <option>Alice Supervisor</option>
              <option>Bob Admin</option>
            </select>
          </div>

          <div class="d-flex justify-content-end gap-2 mt-3">
            <button type="reset" class="btn btn-secondary">Cancel</button>
            <button type="submit" class="btn btn-primary">Save</button>
          </div>
        </div>

      </form>
    </div>
  </div>
</div>
