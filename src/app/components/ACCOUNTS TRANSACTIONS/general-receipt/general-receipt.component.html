<div class="section-content">

  <!-- New Receipt Button -->
  <div class="row mb-3">
    <div class="col-8 d-flex align-items-center">
      <a routerLink="/dashboard/accounts/accounts-transactions/general-receipt-new" class="btn btn-primary border-0">
        New
      </a>
    </div>
  </div>

  <!-- Search Filter -->
  <div class="row mb-4">
    <div class="col-md-6">
      <div class="form-group custom-search">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Search..." (keyup)="filterDatatable($event)">
        </div>
      </div>
    </div>
  </div>

  <!-- PrimeNG Table -->
  <div class="row">
    <div class="col-12">

      <p-table [value]="gridView" [paginator]="true" [rows]="pageCriteria.pageSize" [responsiveLayout]="'scroll'"
        [loading]="loading" [rowsPerPageOptions]="[5,10,20]" (onPage)="onFooterPageChange($event)"
        styleClass="material expandable table p-datatable-gridlines"
        [currentPageReportTemplate]="'Page {currentPage} of {totalPages} ({totalRecords} items)'">

        <!-- Table Header -->
        <ng-template pTemplate="header">
          <tr>
            <th class="header-center">Actions</th>
            <th class="header-left">Receipt Date</th>
            <th class="header-center">Receipt No.</th>
            <th class="header-left">Payment Details</th>
            <th class="header-right">Received Amount</th>
            <th class="header-left" style="width:400px">Narration</th>
          </tr>
        </ng-template>

        <!-- Table Body -->
        <ng-template pTemplate="body" let-row>
          <tr>
            <!-- Actions -->
            <td class="cell-center">
              <button class="btn btn-sm btn-primary" (click)="viewRow(row)">
                View
              </button>
            </td>

            <!-- Receipt Date -->
            <td class="cell-left" [title]="row.preceiptdate">{{ row.preceiptdate }}</td>

            <!-- Receipt No -->
            <td class="cell-center">{{ row.preceiptid }}</td>

            <!-- Payment Details -->
            <td class="cell-left">
              <ng-container *ngIf="row.pmodofreceipt === 'CASH'; else nonCash">
                {{ row.pmodofreceipt }}
              </ng-container>
              <ng-template #nonCash>
                {{ row.pmodofreceipt }} ({{ row.ptypeofpayment }} - {{ row.pChequenumber }})
              </ng-template>
            </td>

            <!-- Received Amount -->
            <td class="cell-right">
              {{ currencySymbol }} {{ row.ptotalreceivedamount | number:'1.2-2' }}
            </td>

            <!-- Narration -->
            <td class="cell-left" style="width:400px">
              <span *ngIf="!row.pnarration">-- NA --</span>
              <span *ngIf="row.pnarration" [title]="row.pnarration">{{ row.pnarration }}</span>
            </td>
          </tr>
        </ng-template>

        <!-- Table Footer -->
        <ng-template pTemplate="footer">
          <tr *ngIf="gridView?.length">
            <td colspan="6">
              Page {{ pageCriteria.pageNumber }} of {{ pageCriteria.TotalPages }}
              ({{ pageCriteria.totalrows }} items)
            </td>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="6" class="text-center">No records found</td>
          </tr>
        </ng-template>

      </p-table>
    </div>
  </div>
</div>

