<!-- [formGroup]="paymentVoucherForm"  -->

<div class="screen-container">
    <div class="screen-card">
        <div class="screen-header">
            <h2>Journal Voucher</h2>
        </div>
        <div class="screen-content">

            <form [formGroup]="paymentVoucherForm" autocomplete="off">

                <div class="section-content">
                    <!-- <div class="row">
                        <div class="col-md-12 col-xl-12">
                            <p class="bc-2">Journal Voucher</p>
                        </div>
                    </div> -->
                    <div class="row">
                        <div class="col-md-6 col-xl-4">
                            <div class="form-group">
                                <label class="required-field">Date</label>
                                <fieldset [disabled]="!disabletransactiondate">
                                    <input class="form-control" id="pjvdate" title="Date" readonly type="text"
                                        [bsConfig]="ppaymentdateConfig" bsDatepicker formControlName="pjvdate"
                                        [ngClass]="{ 'is-invalid': formValidationMessages?.pjvdate }">
                                </fieldset>
                            </div>
                        </div>

                    </div>





                    <hr class="light">
                    <div class="row" formGroupName="ppaymentsslistcontrols">
                        <div class="col-md-6 col-xl-4">
                            <div class="form-group">
                                <div class="input-group d-block">
                                    <label class="required-field">Ledger</label>
                                    <ng-select id="pledgername" title="Ledger" [items]="ledgeraccountslist"
                                        formControlName="pledgerid" groupBy="pAccounttype" bindLabel="pledgername"
                                        bindValue="pledgerid" [multiple]=false placeholder="Select" [searchable]=true
                                        [clearable]=false dropdownPosition="bottom" [clearOnBackspace]=true
                                        (change)="ledgerName_Change($event)">
                                        <ng-template ng-optgroup-tmp let-item="item">
                                            {{item.pAccounttype}}
                                        </ng-template>
                                    </ng-select>


                                    <span class=" position-absolute font-italic"
                                        style="right:-160px; top:35px;">{{ledgerBalance }}</span>
                                </div>
                                <!-- [ngClass]="{ 'is-invalid': formValidationMessages.pledgername }"
                    <app-validation-message [messgae]="formValidationMessages?.pledgername"></app-validation-message> -->

                            </div>

                            <div class="form-group" *ngIf="showsubledger">
                                <div class="input-group d-block">
                                    <label id="psubledgerid" class="required-field" title="Sub Ledger">Sub
                                        Ledger</label>
                                    <ng-select id="psubledgername" title="Sub Ledger" [items]="subledgeraccountslist"
                                        formControlName="psubledgerid" bindLabel="psubledgername"
                                        bindValue="psubledgerid" [multiple]=false placeholder="Select" [searchable]=true
                                        [clearable]=true dropdownPosition="bottom" [clearOnBackspace]=true
                                        (change)="subledger_Change($event)">
                                    </ng-select>
                                    <!--<div class="input-group-append">
          <button class="btn btn-lg-icon rounded-right px-2 p-0"> <img src="assets/images/icon-add-blue.svg" class="" width="20px" height="20px"></button>
        </div>-->
                                    <span class=" position-absolute font-italic"
                                        style="right:-160px; top:30px;">{{subledgerBalance }}</span>
                                </div>
                                <!-- [ngClass]="{ 'is-invalid': formValidationMessages.psubledgername }"
                     <app-validation-message [messgae]="formValidationMessages?.psubledgername"></app-validation-message> -->

                            </div>

                            <div class="form-group">
                                <div class="input-group d-block">
                                    <label id="ppartyid" class="required-field" title="Party">Party</label>

                                    <ng-select id="ppartyname" title="Party" [items]="partylist"
                                        formControlName="ppartyid" bindLabel="ppartyname" bindValue="ppartyid"
                                        [multiple]=false placeholder="Select" [searchable]=true [clearable]=true
                                        dropdownPosition="bottom" [clearOnBackspace]=true
                                        (change)="partyName_Change($event)" [virtualScroll]="true">
                                    </ng-select>

                                    <!-- <app-validation-message [messgae]="formValidationMessages?.ppartyname"></app-validation-message>
                         [ngClass]="{ 'is-invalid': formValidationMessages.ppartyname }" -->
                                    <span class=" position-absolute font-italic"
                                        style="right:-160px; top:30px;">{{partyBalance }}</span>
                                </div>

                            </div>

                            <div class="form-group">

                            </div>
                            <div class="d-flex">
                                <div class="form-group pr-1">
                                    <!--"-->
                                    <!-- (keyup)="disableamounttype('Credit')"-->
                                    <label class="pl-0 pr-0" class="required-field">Debit</label>
                                    <input class="form-control border-warning sec-head-bold " style="text-align:right;"
                                        id="pdebitamount" formControlName="pdebitamount" [readonly]="readonlydebit"
                                        type="text" placeholder="" (keyup)="disableamounttype('Debit')"
                                        (blur)="pamount_change()" appRoundecimal="12@2"
                                        appMyCurrencyFormatorincludingzero>
                                    <!-- <app-validation-message [messgae]="formValidationMessages?.pdebitamount">
                        </app-validation-message>
                        [ngClass]="{ 'is-invalid': formValidationMessages.pdebitamount }" -->
                                </div>
                                <div class="form-group pl-1">
                                    <label class="pl-0 pr-0" class="required-field">Credit</label>
                                    <input class="form-control border-warning sec-head-bold " style="text-align:right;"
                                        id="pcreditamount" formControlName="pcreditamount" [readonly]="readonlycredit"
                                        type="text" placeholder="" (keyup)="disableamounttype('Credit')"
                                        (blur)="pamount_change()" appRoundecimal="12@2"
                                        appMyCurrencyFormatorincludingzero>
                                    <!-- <app-validation-message [messgae]="formValidationMessages?.pcreditamount">
                        </app-validation-message> 
                         [ngClass]="{ 'is-invalid': formValidationMessages.pcreditamount }"-->
                                </div>

                            </div>
                            <div class=" d-flex justify-content-end mt-4">
                                <!--<a class="btn btn-g-icon mr-4 px-3 border-0"><img src="assets/images/icon-cancel-white.svg" width="20px" height="20px" class="mr-3" appButtonDoubleClick [debounceTime]="500" (debounceClick)="clearPaymentDetails()">Clear</a>-->

                                <a class="btn btn-g-icon mr-4 px-3 border-0" (click)="clearPaymentDetails()"><img
                                        src="assets/images/icon-cancel-white.svg" width="20px" height="20px"
                                        class="mr-3" appButtonDoubleClick >Clear</a>
                                        <!-- [debounceTime]="500" -->
                                <a data-toggle="tab" class="btn btn-b-icon px-3 border-0" role="tab" aria-controls="hot"
                                    aria-selected="false" appButtonDoubleClick 
                                    (debounceClick)="addPaymentDetails()"><img src="assets/images/icon-add-blue.svg"
                                        width="20px" height="20px" class="mr-3">Add</a>
                                        <!-- [debounceTime]="500" -->
                            </div>
                        </div>

                        <div class="col-md-6 col-xl-6 offset-2 pt-2">
                            <div *ngIf="showgstandtds">
                                <div class="form-group">
                                    <div class="border rounded p-2 mt-3">
                                        <div class="col-md-12 col-xl-12 mt-2 mb-2">
                                            <fieldset [disabled]="disablegst">
                                                <div class="material-switch">
                                                    <span class="mr-2" id="pisgstapplicable" title="GST"> GST </span>
                                                    <input id="gst-switch" name="gst-switch"
                                                        formControlName="pisgstapplicable" type="checkbox"
                                                        (change)="isgstapplicableChange();">
                                                    <label for="gst-switch" class="badge-success" data-toggle="collapse"
                                                        data-target="#gst"></label>
                                                </div>
                                            </fieldset>
                                            <div id="gst" *ngIf="showgst">
                                                <div class="row">
                                                    <fieldset [disabled]="disablegst">
                                                        <div class="col-md-12 col-xl-12" id="pgstcalculationtype"
                                                            title="GST Calculation Type">
                                                            <div class="form-check form-check-inline mr-4">
                                                                <input class="form-check-input" type="radio"
                                                                    id="procgstinc"
                                                                    formControlName="pgstcalculationtype"
                                                                    name="pgstcalculationtype" value="INCLUDE"
                                                                    (change)="claculategsttdsamounts()"
                                                                    [ngClass]="{ 'is-invalid': formValidationMessages.pgstcalculationtype }">
                                                                <label class="mt-1" for="procgstinc"> Include</label>
                                                            </div>
                                                            <div class="form-check form-check-inline mr-4 mb-2 mt-2">
                                                                <input class="form-check-input" type="radio"
                                                                    id="procgstexc"
                                                                    formControlName="pgstcalculationtype"
                                                                    name="pgstcalculationtype" value="EXCLUDE"
                                                                    (change)="claculategsttdsamounts()">
                                                                <label class="mt-1" for="procgstexc"> Exclude </label>
                                                            </div>
                                                            <!-- <app-validation-message
                                                    [messgae]="formValidationMessages?.pgstcalculationtype">
                                                </app-validation-message> 
                                                [ngClass]="{ 'is-invalid': formValidationMessages.pgstcalculationtype }"-->

                                                        </div>
                                                    </fieldset>
                                                    <div class="col-md-12 col-xl-12">
                                                        <div class="d-flex">
                                                            <div class="form-group mr-1 col-md-4">
                                                                <label>State</label>
                                                                <select class="form-control" id="pState" title="State"
                                                                    formControlName="pStateId"
                                                                    (change)="state_change($event)">
                                                                    <option value="" ng-selected="selected">Select
                                                                    </option>
                                                                    <option
                                                                        *ngFor="let state of statelist;trackBy: trackByFn"
                                                                        [value]="state.pStateId">{{state.pState}}
                                                                    </option>
                                                                </select>
                                                                <!-- <app-validation-message [messgae]="formValidationMessages?.pState">
                                                    </app-validation-message> 
                                                     [ngClass]="{ 'is-invalid': formValidationMessages.pState }"-->
                                                            </div>

                                                            <div class="form-group mr-1 col-md-4" *ngIf="showgstno">
                                                                <label>GST No.</label>
                                                                <input type="text" class="form-control col-md-12"
                                                                    id="pgstno" title=">GST No."
                                                                    formControlName="pgstno" (blur)="gsno_change()" />
                                                                <!-- <app-validation-message [messgae]="formValidationMessages?.pgstno">
                                                    </app-validation-message> 
                                                     [ngClass]="{ 'is-invalid': formValidationMessages.pgstno }"-->

                                                            </div>
                                                            <div class="form-group mr-1 col-md-4">
                                                                <label>GST(%)</label>
                                                                <select class="form-control" id="pgstpercentage"
                                                                    title="GST(%)" formControlName="pgstpercentage"
                                                                    (change)="gst_Change($event)">
                                                                    <option value="" ng-selected="selected">Select
                                                                    </option>
                                                                    <option
                                                                        *ngFor="let gst of gstlist;trackBy: trackByFn"
                                                                        [value]="gst.pgstpercentage">
                                                                        {{gst.pgstpercentage}}</option>

                                                                </select>
                                                                <!-- <app-validation-message
                                                        [messgae]="formValidationMessages?.pgstpercentage">
                                                    </app-validation-message> 
                                                     [ngClass]="{ 'is-invalid': formValidationMessages.pgstpercentage }"-->
                                                            </div>
                                                        </div>

                                                        <div class="d-flex">
                                                            <div class="form-group mr-1 col-md-4" *ngIf="showgstamount">
                                                                <label>Amount</label>
                                                                <label
                                                                    class="form-control col-md-12">
                                                                    <!-- {{paymentVoucherForm['controls'].ppaymentsslistcontrols['controls'].pgstamount.value}} -->
                                                                     {{paymentVoucherForm.get('ppaymentsslistcontrols')?.get('pgstamount')?.value
                                                                    ?? 0}}
                                                                </label>
                                                            </div>
                                                            <div class="form-group mr-1 col-md-4" *ngIf="showigst">
                                                                <label>
                                                                    <!-- IGST({{paymentVoucherForm['controls'].ppaymentsslistcontrols['controls'].pigstpercentage.value}}) -->
                                                                    IGST({{
    paymentVoucherForm.get('ppaymentsslistcontrols')?.get('pigstpercentage')?.value ?? 0
  }}%)

                                                                </label>
                                                                <label
                                                                    class="col-md-12">
                                                                    <!-- {{paymentVoucherForm['controls'].ppaymentsslistcontrols['controls'].pigstamount.value}} -->

                                                                   {{  paymentVoucherForm.get('ppaymentsslistcontrols')?.get('pigstamount')?.value
                                                                    ?? 0}}
                                                                </label>
                                                            </div>
                                                            <div class="form-group mr-1 col-md-4" *ngIf="showcgst">
                                                                <label>
                                                                    <!-- CGST
                                                                    ({{paymentVoucherForm['controls'].ppaymentsslistcontrols['controls'].pcgstpercentage.value}}) -->
                                                                
                                                                CGST({{
    paymentVoucherForm.get('ppaymentsslistcontrols')?.get('pcgstpercentage')?.value ?? 0
  }}%)
                                                                
                                                                </label>
                                                                <label
                                                                    class="col-md-12">
                                                                    <!-- {{paymentVoucherForm['controls'].ppaymentsslistcontrols['controls'].pcgstamount.value}} -->
                                                                    {{ paymentVoucherForm.get('ppaymentsslistcontrols')?.get('pcgstamount')?.value
                                                                    ?? 0}}
                                                                </label>
                                                                <!--<input type="text" formControlName="pcgstpercentage" class="form-control col-md-12" />-->
                                                            </div>
                                                            <div class="form-group  mr-1 col-md-4" *ngIf="showsgst">
                                                                <label>SGST
                                                                    <!-- ({{paymentVoucherForm['controls'].ppaymentsslistcontrols['controls'].psgstpercentage.value}}) -->
                                                                    {{ paymentVoucherForm.get('ppaymentsslistcontrols')?.get('psgstpercentage')?.value
                                                                    ?? 0}}

                                                                </label>
                                                                <label class="col-md-12">
                                                                   {{ paymentVoucherForm.get('ppaymentsslistcontrols')?.get('psgstamount')?.value
                                                                    ?? 0}}

                                                                    <!-- {{paymentVoucherForm['controls'].ppaymentsslistcontrols['controls'].psgstamount.value}} -->
                                                                </label>
                                                            </div>
                                                            <div class="form-group  mr-1 col-md-4" *ngIf="showutgst">
                                                                <label>
                                                                    <!-- UTGST({{
                                                                    paymentVoucherForm.get('ppaymentsslistcontrols')?.get('putgstpercentage')?.value
                                                                    ?? 0

                                                                }}) -->


                                                                UTGST({{
    paymentVoucherForm.get('ppaymentsslistcontrols')?.get('putgstpercentage')?.value ?? 0
  }}%)

                                                                    <!-- paymentVoucherForm['controls'].ppaymentsslistcontrols['controls'].putgstpercentage.value -->
                                                                  
                                                                </label>
                                                                <label class="col-md-12">
                                                                    {{
                                                                    paymentVoucherForm.get('ppaymentsslistcontrols')?.get('putgstamount')?.value
                                                                    ?? 0}}
                                                                    <!-- {{paymentVoucherForm['controls'].ppaymentsslistcontrols['controls'].putgstamount.value}} -->
                                                                </label>
                                                            </div>
                                                        </div>

                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="form-group">
                                    <div class="border rounded p-2 mt-3">
                                        <div class="col-md-12 col-xl-12 mt-2 mb-2">
                                            <div class="material-switch">
                                                <span class="mr-2" id="pistdsapplicable" title="TDS"> TDS </span>
                                                <input id="tds-switch" name="tds-switch"
                                                    formControlName="pistdsapplicable" type="checkbox"
                                                    (change)="istdsapplicableChange()"
                                                    [ngClass]="{ 'is-invalid': formValidationMessages.pistdsapplicable }">
                                                <label for="tds-switch" class="badge-success" data-toggle="collapse"
                                                    data-target="#tds"></label>
                                            </div>
                                            <div id="tds" *ngIf="showtds">
                                                <div class="row">
                                                    <fieldset [disabled]="disablegst">
                                                        <div class="col-md-12 col-xl-12" id="ptdscalculationtype"
                                                            title="TDS Calculation Type">
                                                            <div
                                                                class="form-check form-check-inline radio-btn-secondary mr-4 ">
                                                                <input class="form-check-input" type="radio"
                                                                    id="tdsinclude" value="INCLUDE"
                                                                    formControlName="ptdscalculationtype"
                                                                    name="ptdscalculationtype"
                                                                    [ngClass]="{ 'is-invalid': formValidationMessages.ptdscalculationtype }"
                                                                    (change)="claculategsttdsamounts()">
                                                                <label class="mt-1" for="tdsinclude"> Include</label>
                                                            </div>
                                                            <div
                                                                class="form-check form-check-inline radio-btn-secondary mr-4 mb-2 mt-2">
                                                                <input class="form-check-input" type="radio"
                                                                    id="tdsexcluded" value="EXCLUDE"
                                                                    formControlName="ptdscalculationtype"
                                                                    name="ptdscalculationtype"
                                                                    (change)="claculategsttdsamounts()">
                                                                <label class="mt-1" for="tdsexcluded"> Exclude</label>
                                                            </div>
                                                            <!-- <app-validation-message
                                                    [messgae]="formValidationMessages?.ptdscalculationtype">
                                                </app-validation-message>
                                                 [ngClass]="{ 'is-invalid': formValidationMessages.ptdscalculationtype }" -->
                                                        </div>
                                                    </fieldset>
                                                    <div class="col-md-4 col-xl-4">
                                                        <label>Section</label>
                                                        <select class="form-control" id="pTdsSection" title="Section"
                                                            formControlName="pTdsSection"
                                                            (change)="tdsSection_Change($event)">
                                                            <option value="" ng-selected="selected">Select</option>
                                                            <option
                                                                *ngFor="let tds of tdssectionlist;trackBy: trackByFn"
                                                                [value]="tds.pTdsSection">{{tds.pTdsSection}}</option>

                                                        </select>
                                                        <!-- <app-validation-message [messgae]="formValidationMessages?.pTdsSection">
                                            </app-validation-message> 
                                             [ngClass]="{ 'is-invalid': formValidationMessages.pTdsSection }"-->
                                                    </div>
                                                    <div class="col-md-4 col-xl-4">
                                                        <label>Percentage</label>
                                                        <select class="form-control" id="pTdsPercentage" title="Section"
                                                            formControlName="pTdsPercentage"
                                                            (change)="tds_Change($event)">
                                                            <option value="" ng-selected="selected">Select</option>
                                                            <option
                                                                *ngFor="let tds of tdspercentagelist;trackBy: trackByFn"
                                                                [value]="tds.pTdsPercentage">{{tds.pTdsPercentage}}
                                                            </option>

                                                        </select>
                                                        <!-- <app-validation-message [messgae]="formValidationMessages?.pTdsPercentage">
                                            </app-validation-message>
                                             [ngClass]="{ 'is-invalid': formValidationMessages.pTdsPercentage }" -->
                                                    </div>
                                                    <div class="col-md-4 col-xl-4">
                                                        <label>Amount</label>
                                                        <label class="form-control col-md-12" id="ptdsamount"
                                                            title="Section">
                                                            {{paymentVoucherForm.get('ppaymentsslistcontrols')?.get('ptdsamount')?.value
                                                            ?? 0}}

                                                            <!-- paymentVoucherForm.get('ppaymentsslistcontrols')?.get('ptdsamount')?.value ?? 0 -->

                                                        </label>
                                                        <!--<input class="form-control" type="text" id="ptdsamount" title="Section" formControlName="ptdsamount" [ngClass]="{ 'is-invalid': formValidationMessages.ptdsamount }" />-->
                                                        <!-- <app-validation-message [messgae]="formValidationMessages?.ptdsamount">
                                            </app-validation-message> 
                                             [ngClass]="{ 'is-invalid': formValidationMessages.ptdsamount }"-->

                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--<div class=" d-flex justify-content-end mt-4">
            <a class="btn btn-g-icon mr-4 px-3 border-0"><img src="assets/images/icon-cancel-white.svg" width="20px" height="20px" class="mr-3" appButtonDoubleClick [debounceTime]="500" (debounceClick)="clearPaymentDetails()">Clear</a>
            <a data-toggle="tab" class="btn btn-b-icon px-3 border-0" role="tab" aria-controls="hot" aria-selected="false" appButtonDoubleClick [debounceTime]="500" (debounceClick)="addPaymentDetails()"><img src="assets/images/icon-add-white.svg" width="20px" height="20px" class="mr-3">Add</a>
          </div>-->

                        </div>

                    </div>
                </div>
                <div class="section-content mt-2">
                    <div class="row">
                        <div class="col-md-12 col-xl-12 pt-4">
                            <ngx-datatable class="material expandable table" [rows]="paymentslist" columnMode="force"
                                [headerHeight]="50" [footerHeight]="50" [rowHeight]="50" [limit]="10" [offset]="1"
                                [count]="10" [summaryRow]="true" [summaryHeight]="50" [summaryPosition]="'bottom'">
                                <ngx-datatable-column name="Actions" prop="" editable="true"
                                    [summaryTemplate]="Total11">
                                    <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value"
                                        let-row="row" let-group="group">
                                        <label for="delete{{ rowIndex }}">
                                            <div id="icon-delete" (click)="removeHandler(row, rowIndex)"></div>
                                        </label>
                                    </ng-template>
                                    <ng-template #Total11>
                                    </ng-template>
                                </ngx-datatable-column>

                                <ngx-datatable-column name="Party Name" prop="ppartyname" [cellClass]="'cell-left'"
                                    [headerClass]="'header-left'">
                                </ngx-datatable-column>

                                <ngx-datatable-column name="Ledger Name" prop="pledgername" [cellClass]="'cell-left'"
                                    [headerClass]="'header-left'">
                                </ngx-datatable-column>

                                <ngx-datatable-column name="Sub Ledger Name" prop="psubledgername"
                                    [cellClass]="'cell-left'" [headerClass]="'header-left'">
                                </ngx-datatable-column>

                                <ngx-datatable-column prop="ptotaldebitamount" name="Debit" [summaryTemplate]="Total"
                                    [headerClass]="'header-left'" [cellClass]="'cell-left'">
                                    <ng-template let-row="row" ngx-datatable-cell-template>
                                        <div *ngIf="row.ptotaldebitamount==0"></div>
                                        <div *ngIf="row.ptotaldebitamount!=0"
                                            title="{{currencySymbol}} {{row.ptotaldebitamount}}">
                                            {{currencySymbol}} {{row.ptotaldebitamount | currency:
                                            currencyCode:'symbol':'1.2-2'}}




                                        </div>




                                    </ng-template>
                                    <ng-template #Total>
                                        <span>Total: </span>
                                        {{currencySymbol}} {{debittotalamount.toFixed(2) | currency:
                                        currencyCode:'symbol':'1.2-2'}}
                                    </ng-template>
                                </ngx-datatable-column>

                                <!-- <ngx-datatable-column name="Debit" prop="ptotaldebitamount" [cellClass]="'cell-left'"
                            [headerClass]="'header-left'">
                            <ng-template let-row="row" ngx-datatable-cell-template>
                                <div *ngIf="row.ptotaldebitamount==0"></div>
                                <div *ngIf="row.ptotaldebitamount!=0">
                                <span title="{{currencysymbol}} {{row.ptotaldebitamount | currencypipe}}">{{currencySymbol}} {{row.ptotaldebitamount | currencypipe}}</span>
                            </div>
                            </ng-template>
                        </ngx-datatable-column> -->

                                <ngx-datatable-column name="Credit" prop="ptotalcreditamount" [cellClass]="'cell-left'"
                                    [headerClass]="'header-left'" [summaryTemplate]="Total1">
                                    <ng-template let-row="row" ngx-datatable-cell-template>
                                        <div *ngIf="row.ptotalcreditamount==0"></div>
                                        <div *ngIf="row.ptotalcreditamount!=0">
                                            <span
                                                title="{{currencySymbol}} {{row.ptotalcreditamount |  currency: currencyCode:'symbol':'1.2-2'}}">{{currencySymbol}}
                                                {{row.ptotalcreditamount | currency:
                                                currencyCode:'symbol':'1.2-2'}}</span>
                                        </div>
                                    </ng-template>
                                    <ng-template #Total1>
                                        <span>Total: </span>
                                        <span> {{currencySymbol}} {{credittotalamount.toFixed(2) | currency:
                                            currencyCode:'symbol':'1.2-2'}} </span>
                                    </ng-template>
                                </ngx-datatable-column>
                                
                            </ngx-datatable>



                              <p-table [value]="paymentslist" dataKey="ppartyname" [paginator]="false" [rows]="10"
                                [showCurrentPageReport]="false" [resizableColumns]="true" columnResizeMode="fit"
                                scrollable="true" scrollHeight="400px"
                                styleClass="p-datatable-sm p-datatable-gridlines p-datatable-striped">

                                <ng-template pTemplate="header">
                                    <tr>
                                        <th style="width:100px">Actions</th>
                                        <th>Party Name</th>
                                        <th>Ledger Name</th>
                                        <th>Sub Ledger Name</th>
                                        <th>Debit</th>
                                        <th>Credit</th>
                                    </tr>
                                </ng-template>

                                <ng-template pTemplate="body" let-row let-rowIndex="rowIndex">
                                    <tr>
                                        <td class="text-center">
                                            <button pButton type="button" icon="pi pi-trash"
                                                class="p-button-text p-button-sm"
                                                (click)="removeHandler(row, rowIndex)">
                                            </button>
                                        </td>

                                        <td>{{ row.ppartyname }}</td>
                                        <td>{{ row.pledgername }}</td>
                                        <td>{{ row.psubledgername }}</td>

                                        <td class="text-right" *ngIf="row.ptotaldebitamount != 0">
                                            {{ row.ptotaldebitamount | currency:'INR':'symbol':'1.2-2' }}
                                        </td>
                                        <td class="text-right" *ngIf="row.ptotaldebitamount == 0"></td>

                                        <td class="text-right" *ngIf="row.ptotalcreditamount != 0">
                                            {{ row.ptotalcreditamount | currency:'INR':'symbol':'1.2-2' }}
                                        </td>
                                        <td class="text-right" *ngIf="row.ptotalcreditamount == 0"></td>
                                    </tr>
                                </ng-template>

                                <ng-template pTemplate="footer">
                                    <tr>
                                        <td colspan="4" class="text-right"><strong>Total:</strong></td>
                                        <td class="text-right"><strong>{{ debittotalamount |
                                                currency:'INR':'symbol':'1.2-2' }}</strong></td>
                                        <td class="text-right"><strong>{{ credittotalamount |
                                                currency:'INR':'symbol':'1.2-2' }}</strong></td>
                                    </tr>
                                </ng-template>

                                <ng-template pTemplate="emptymessage">
                                    <tr>
                                        <td colspan="6" class="text-center">No records found</td>
                                    </tr>
                                </ng-template>
                            </p-table>

                            <div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="section-content mt-2">
                    <div class="row">
                        <div class="col-md-6 col-xl-6">
                            <div class="mt-2">
                                <ngx-datatable class="material expandable table" [rows]="paymentslist"
                                    columnMode="force" [headerHeight]="50" [footerHeight]="50" [rowHeight]="50"
                                    [limit]="10">
                                    <ngx-datatable-column name="Journal Entry" prop="pledgername"
                                        [cellClass]="'cell-left'" [headerClass]="'header-left'">
                                    </ngx-datatable-column>
                                    <ngx-datatable-column appMycurrencyFormatter name="Dr" prop="ptotaldebitamount"
                                        [cellClass]="'cell-right'" [headerClass]="'header-right'">
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            <div *ngIf="row.ptotaldebitamount==0"></div>
                                            <div *ngIf="row.ptotaldebitamount!=0">
                                                <!-- <span title="{{currencysymbol}} {{row.ptotaldebitamount |  currency: currencyCode:'symbol':'1.2-2'}}">{{currencySymbol}} {{row.ptotaldebitamount |  currency: currencyCode:'symbol':'1.2-2'}}</span> -->
                                                <span title="{{currencySymbol}} {{row.ptotalcreditamount}}">
                                                    {{currencySymbol}} {{row.ptotalcreditamount | currency:
                                                    currencyCode:'symbol':'1.2-2'}}
                                                </span>

                                            </div>
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Cr" prop="ptotalcreditamount"
                                        [cellClass]="'cell-center'" [headerClass]="'header-center'">
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            <div *ngIf="row.ptotalcreditamount==0"></div>
                                            <div *ngIf="row.ptotalcreditamount!=0">
                                                <!-- <span title="{{currencysymbol}} {{row.ptotalcreditamount |  currency: currencyCode:'symbol':'1.2-2'}}">{{currencySymbol}} {{row.ptotalcreditamount |  currency: currencyCode:'symbol':'1.2-2'}}</span> -->


                                                <span title="{{currencySymbol}} {{row.ptotalcreditamount}}">
                                                    {{currencySymbol}} {{row.ptotalcreditamount | currency:
                                                    currencyCode:'symbol':'1.2-2'}}
                                                </span>

                                            </div>
                                        </ng-template>
                                    </ngx-datatable-column>
                                </ngx-datatable>



                                  <p-table [value]="paymentslist" dataKey="pledgername" [rows]="10" [paginator]="false"
                                    [resizableColumns]="true" columnResizeMode="fit" scrollable="true"
                                    scrollHeight="400px"
                                    styleClass="p-datatable-sm p-datatable-gridlines p-datatable-striped">

                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th>Journal Entry</th>
                                            <th class="text-right">Dr</th>
                                            <th class="text-right">Cr</th>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-row>
                                        <tr>
                                            <td>{{ row.pledgername }}</td>
                                            <td class="text-right">
                                                <ng-container *ngIf="row.ptotaldebitamount != 0; else emptyDr">
                                                    {{ currencySymbol }} {{ row.ptotaldebitamount |
                                                    currency:'INR':'symbol':'1.2-2' }}
                                                </ng-container>
                                                <ng-template #emptyDr></ng-template>
                                            </td>
                                            <td class="text-right">
                                                <ng-container *ngIf="row.ptotalcreditamount != 0; else emptyCr">
                                                    {{ currencySymbol }} {{ row.ptotalcreditamount |
                                                    currency:'INR':'symbol':'1.2-2' }}
                                                </ng-container>
                                                <ng-template #emptyCr></ng-template>
                                            </td>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="emptymessage">
                                        <tr>
                                            <td colspan="3" class="text-center">No records found</td>
                                        </tr>
                                    </ng-template>

                                </p-table>
                            </div>

                        </div>

                        <div class="col-md-6 col-xl-6">
                            <div class="form-group mt-2">
                                <label class="required-field">Narration</label>
                                <textarea class="form-control" rows="4" id="pnarration" title="Narration"
                                    formControlName="pnarration" maxlength="250"></textarea>

                                <!-- <app-validation-message [messgae]="formValidationMessages?.pnarration"></app-validation-message>
                      [ngClass]="{ 'is-invalid': formValidationMessages.pnarration }" -->

                            </div>
                            <div class="form-group col-md-6 pl-0">
                                <div class="form-group">
                                    <label id="pDocStorePath" title="Upload Document">Upload Document</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder=""
                                            [value]="imageResponse?.name" [disabled]="true"
                                            formControlName="pDocStorePath">
                                        <div class="input-group-append">
                                            <button class="btn btn-lg-icon px-2 p-0" (click)="fileInput.click()">
                                                <img src="assets/images/icon-upload-blue.svg" class="" width="18px"
                                                    height="18px">
                                            </button>
                                            <!-- to uplaod the image -->
                                            <input style="display: none" type="file"
                                                (change)="uploadAndProgress($event,fileInput.files)" #fileInput>
                                        </div>

                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- row end -->
            </form>

            <!------------- save Buttons ------------>

            <div class="row mt-3">
                <div class="col-md-12 col-xl-12">
                    <div class="d-flex justify-content-end">
                        <!--<a class="btn btn-g-icon mr-4 px-3 border-0"><img src="assets/images/icon-cancel-white.svg" width="20px" height="20px" class="mr-3" appButtonDoubleClick [debounceTime]="500" (debounceClick)="clearPaymentVoucher()">Clear</a>-->
                        <a class="btn btn-g-icon mr-4 px-3 border-0" (click)="clearPaymentVoucher()"><img
                                src="assets/images/icon-cancel-white.svg" width="20px" height="20px" class="mr-3"
                                appButtonDoubleClick>Clear</a>
                        <!-- [debounceTime]="500" -->
                        <!-- <button (click)="saveJournalVoucher()" class="btn btn-b-icon px-3 border-0"
                    [disabled]="disablesavebutton">
                    <i class="fa"
                        [ngClass]="{'fa-spin fa-spinner': disablesavebutton, 'fa-check': !disablesavebutton}"></i>
                    {{savebutton}}
                </button> -->

                        <button (click)="saveJournalVoucher()" class="btn btn-s-icon px-3 border-0"
                            [disabled]="disablesavebutton">
                            <img src="assets/images/icon-check-white.svg" class="mr-3" width="20px" height="20px"
                                *ngIf="!disablesavebutton">
                            <i class="fa" [ngClass]="{'fa-spin fa-spinner': disablesavebutton}"></i> {{savebutton}}
                        </button>

                        <!--<a data-toggle="tab" class="btn btn-b-icon px-3 border-0" role="tab" aria-controls="hot" aria-selected="false" appButtonDoubleClick [debounceTime]="500" (debounceClick)="saveJournalVoucher()"><img src="assets/images/icon-check-white.svg" width="20px" height="20px" class="mr-3">Save</a>-->
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>